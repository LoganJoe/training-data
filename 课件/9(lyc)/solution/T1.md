[TOC]

##### 题目大意

给你一棵 $n$ 个结点的仙人掌，你想给每个结点染成 $C$ 种颜色中的一种，使得每条边两端的颜色不能相同。有多组询问，每次给定不同的 $C$。

$n, q \le 10^5$，$m \le 2n - 2$。时限 2 sec。

Special Instance：$m = n - 1$。

##### 思路

考虑树上怎么做。设 $f_i$ 表示以 $i$ 为根的子树中 $i$ 染某种颜色时这棵子树满足题意的方案数，那么最终答案为 $C \cdot f_1$，边界条件为 $f_{叶子} = 1$，状态转移方程为：
$$
f_i = \prod(C - 1) \cdot f_{儿子}
$$
发现算出来最终答案为 $(C - 1)^{n - 1} \cdot C$，和链上的情况一样。

------

考虑一个单独的环怎么做。数学课上讲的答案为：
$$
(C - 1)^{n} + (C - 1)(-1)^n
$$

------

