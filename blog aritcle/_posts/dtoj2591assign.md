---
title: " DTOJ2591Assign\t\t"
tags:
  - 概率dp
url: 1075.html
id: 1075
categories:
  - DTOJ
  - Solution
date: 2018-03-18 16:05:14
---

首先枚举一个人和他的分数作为分数线。然后考虑如何算出每个人进复赛的概率。 记$f\[i\]\[j\]$为标号在$1\\sim i$的选手进了$j$个的概率，$g\[i\]\[j\]$为标号在$i\\sim n$的选手进了$j$个的概率。 转移也就是计算当前这个人的分数要多少才能进复赛，通过分数的取值范围就能求出概率进行转移。注意如果当前这个人是我们枚举作为分数线的那个人，他的分数是固定的，因此要特判一下。 考虑通过$f$和$g$求出第$i$个人进复赛的概率。 若$i$之前有$j$个人进了复赛，概率为$f\[i-1\]\[j\]$，那么$i$之后就有$k-j-1$个人进了复赛，概率为$g\[i+1\]\[k-j-1\]$。 同样地，我们可以求出$i$要多少分才能进复赛，记为$p$，那么$f\[i-1\]\[j\]\\times g\[i+1\]\[k-j-1\]\\times p$就是$i$进复赛的概率。 由于进$A$组和进$B$组只和标号有关，同时我们知道$i$之前有几个复赛，那么就可以轻松算出$i$是被分在$A$组还是$B$组。 枚举$j$就能算出$i$进$A$组和$B$组的概率了。