---
title: " DTOJ3864小Y的有向图\t\t"
tags:
  - 费用流
url: 3725.html
id: 3725
categories:
  - Solution
date: 2018-08-28 20:46:37
---

注意到，如果将路径的经过次数看做对应数量的边，然后题目要满足的限制是对于所有点的出度与入度相同。

那么对于一条边，我们花费一定代价去修改，可以至多改小c次或者无限次改多。从而对于两段的点产生影响。

我们按照上述思路建图。对于$deg\_i>0$的点，从$S$连一条流量为$deg\_i$，费用为$0$的边，否则向$T$连一条流量为$deg\_i$，费用为$0$的边，表示这条边需要被修改$deg\_i$次。

对于原图上的一条边$(u\_i,v\_i)$，$u\_i$向$v\_i$连一条流量为$c$，费用为$w$的边，代表将这条边改小的代价。$v\_i$向$u\_i$连一条流量为$inf$，费用为$w$的边。那么每流1流量代表这条边的经过次数变动一次。

同时$1$到$n$也要连一条流量为$inf$，费用为$0$的边，并且把$deg\_n$换到$deg\_1$上。因为要保证1点的出度和n点的入度相等。

跑最小费用最大流就可以求出答案。