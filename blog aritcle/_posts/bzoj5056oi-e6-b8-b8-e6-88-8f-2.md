---
title: " BZOJ5056OI游戏\t\t"
tags:
  - 思路
url: 6810.html
id: 6810
categories:
  - BZOJ
  - Solution
date: 2019-03-03 22:45:09
---

我们先跑一遍最短路，不可能在最短路树上的边我们不用考虑了。 假如还剩下$m$条边，由于边是有向的，我们要求以$1$为根的外向树的数量。 外向树数量？矩阵树定理走一波！ 求出每个点的入度$deg\_i$，那么每个点肯定要有一个点能走到它。 那么点$i$选一条边到它的方案数就是$deg\_i$。 答案就是 $$\\prod_{i=2}^n deg_i$$ 因为求完最短路后边是有向的，每个点选择一条边到它相当于选了它在树上的父亲。 最短路跑Floyd就好了不用写Dijkstra…