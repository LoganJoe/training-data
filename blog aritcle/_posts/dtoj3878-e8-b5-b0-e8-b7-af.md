---
title: " DTOJ3878走路\t\t"
tags:
  - dp
  - 思路
url: 3670.html
id: 3670
categories:
  - DTOJ
  - Solution
date: 2018-08-27 22:54:35
---

最优方案肯定是走到某个点然后吃这个点的东西，接着一边走一边吃沿路的东西。 考虑dp。 记$f\[i\]\[j\]$表示不吃$1\\sim i-1$这些餐馆，一共吃了$j$克食物的最小代价，那么有 $f\[i\]\[j\]=\\min(f\[i+1\]\[j-a\_i\]+ia\_i,f\[i+1\]\[j\])$ 还有$f\[i\]\[a\_i\]=\\min(f\[i\]\[a\_i\],2i+ia_i)$，即走到$i$吃完直接回来。 发现如果更新了$ij>m$的$f\[i\]\[j\]$，是没有意义的。因为此时一定有$f\[i\]\[j\]>m$。 我们把第一维滚掉，那么我们只需更新$ij\\leq m$的$f\[i\]\[j\]$即可。 时间复杂度$\\Theta(n+m\\log m)$。 如果dp状态是走到$i$再回来，一共吃了$j$克食物的最小代价，就无法这样优化了。 这就是我测试的时候虽然想到了这个方向但尝试许久都失败的原因。