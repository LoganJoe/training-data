---
title: " DTOJ1875三叉神经树\t\t"
tags:
  - 树链剖分
  - 线段树
url: 3744.html
id: 3744
categories:
  - Solution
date: 2018-08-28 22:48:19
---

考虑一个点下的为$1$的点的数量。当数量在$\\leq 2$时，输出$0$。否则输出1。

那么我们发现，每次修改一个点，一定影响的是当前点到根的路径，并且一定是当前点往上一段都需要修改，然后全部不需要修改。

对于每个点，记录其儿子$1$的数量$val_x$。

对于$0$改成$1$的点，仅当修改点$val=1$时会进行修改，其他的不会改变状态。

对于$1$改成$0$的点，仅当修改点$val=2$时会进行修改，其他的不会改变状态。

那么我们在树剖序上用线段树进行维护。对于每一段连续的区间，在线段树上二分找到编号最大的，$val \\neq1/2$的点，然后只改到当前点就好了，上面的点不需要修改。

要判断是否有值，我们可以对于线段树每个区间存val的最大与最小值。这样我们就能够方便的知道这一段中的val的值域区间。修改的话我们对于修改区间整体+1或者-1就好了。