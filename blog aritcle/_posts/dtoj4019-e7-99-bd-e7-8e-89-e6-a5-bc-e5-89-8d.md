---
title: " DTOJ4019白玉楼前\t\t"
tags:
  - dp
  - 概率
url: 4920.html
id: 4920
categories:
  - Solution
date: 2018-11-01 12:42:59
---

题目大意就是每一个点都随机一条出边，求所有的边都构成大小不超过2的环的概率。

考虑计算方案数，设$f\[i\]$表示前$i$个点的概率，那么对于第$i$个点，有两种方案，第一种是自己构成一个点，那么方案数就为$f\[i-1\]$。第二种是找前面的某一个点构成一个环，这样有$i-1$个点可以配对，方案数就为$(i-1)\\times f\[i-2\]$。综上所述，$f\[i\]=f\[i-1\]+(i-1)\\times f\[i-2\]$。概率就再除$i^i$就好了。