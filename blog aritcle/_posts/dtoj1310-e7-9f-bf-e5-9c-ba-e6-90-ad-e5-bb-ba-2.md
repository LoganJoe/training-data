---
title: " DTOJ1310矿场搭建\t\t"
tags:
  - tarjan
url: 4722.html
id: 4722
categories:
  - DTOJ
  - Solution
date: 2018-10-28 23:11:46
---

显然这题和割点有关。 我们先用tarjan求出所有的割点。 然后我们考虑把割点删掉，然后对每个连通块分开考虑。 不妨设当前的连通块大小为$size$。然后我们分类讨论。

*   如果当前连通块没有与割点相连，在原图中没有割点。那么这个连通块内一定要设两个出口，方案数为$\\frac{size(size-1)}{2}$。
*   如果当前连通块与一个割点相连，那么这个连通块内设一个出口就够了。可以任选一个点，方案数为$size$。如果坍塌的是割点，这个连通块的点都能到出口；如果坍塌的是出口，那么连通块里的点都能通过割点出去走到另一个连通块，而另一个连通块内一定有出口。
*   如果当前连通块与$>1$个割点相连，那么这个连通块内不用设出口，因为无论坍塌的是什么点，这个连通块里的点都能走到另一个连通块。

将每个连通块内的出口数加起来就是第一问。将每个连通块内的方案数乘起来就是第二问了。