---
title: " BZOJ2438[中山市选2011]杀人游戏\t\t"
tags:
  - tarjan
  - 概率
url: 1457.html
id: 1457
categories:
  - BZOJ
  - Solution
date: 2018-04-15 12:02:05
---

同DTOJ3348益兽。 其实DTOJ3348我早过了然而发现数据太弱可以被hack。就去写了BZOJ2438。 显然在同一个强连通分量里的点，只要知道一个就可以知道整个强连通分量。因此我们可以先tarjan，然后缩点得到多个DAG。 问题其实变成了要选几个点开始走，能遍历所有的点。 可以感知到答案和DAG中入度为$0$的点的个数有关，记有$cnt$个，那么答案为$1-\\frac{cnt}{n}$。 但是会有一些特殊情况，有时候我们可以从$cnt-1$个点开始走，遍历$n-1$个点，那么我们可以知道剩下那个点的信息，就不用再走一次了。 那我们枚举所有入度为$0$的点，然后判断如果不从这个点开始走，走其他$cnt-1$个点，能不能遍历其他$n-1$个点。 判断其实就是判断这个点能到的所有点，能不能被其他点到达。 如果这种特殊情况存在，那么答案就是$1-\\frac{cnt-1}{n}$，否则就是$1-\\frac{cnt}{n}$。