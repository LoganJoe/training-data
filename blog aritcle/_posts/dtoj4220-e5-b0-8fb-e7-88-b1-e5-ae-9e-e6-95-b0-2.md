---
title: " DTOJ4220小b爱实数\t\t"
tags:
  - 思路
url: 6930.html
id: 6930
categories:
  - Solution
date: 2019-03-10 21:02:43
---

设$1$个数前缀和为$sum\_i$。我们要令 $$|f-\\frac{sum\_r-sum\_l}{r-l}|$$ 尽量小。 拆掉式子我们要令 $$|\\frac{fr-fl-sum\_r+sum\_l}{r-l}|$$ 尽量小。容易发现这是个斜率的形式，那么我们令每个位置的点为$(i,fi-sum\_i)$，找出两个点使得两点斜率绝对值最小。 按照$y$排序，最优解一定在相邻的两个点取到。试取两个不相邻的点为最优解，那么这两个点之间任取一点做三角形，其一定有一条边比当前这条线斜率小。 $O(n \\log n)$。