---
title: " DTOJ2935询问\t\t"
tags:
  - 线段树
url: 3411.html
id: 3411
categories:
  - Solution
date: 2018-08-12 16:43:30
---

注意到一个很关键的点：序列中的元素两两不同。也就是说两个交集为空的区间不可能有相同的最小值，否则这个最小值一定在这几个区间的交集中。

那么我们二分答案。每次判定前mid个区间是否合法。

首先判掉相同最小值交集为空的情况。然后我们对于交集处理。另外一种矛盾的情况是最小值较大的区间包含了一个最小值较小的区间。

这个东西我们可以将所有区间按照最小值从小到大排序然后顺序加入线段树。每次区间查询整段区间是否被全部覆盖（$sum=r-l+1$），然后就是区间赋值为1的操作，用线段树维护即可。