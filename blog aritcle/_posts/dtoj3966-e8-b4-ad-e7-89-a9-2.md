---
title: " DTOJ3966购物\t\t"
tags:
  - 思路
url: 4727.html
id: 4727
categories:
  - DTOJ
  - Solution
  - 不会证
date: 2018-10-29 13:25:32
---

我感觉这题很神奇。 显然如果存在一个价格和为$x$的方案，就能使得区间$\[\\left \\lceil \\frac{x}{2}\\right \\rceil,x\]$的数都是美妙的。 我们将数组$a$从小到大排序，然后依次枚举每个数。 假设当前枚举到$a\_i$，记$Sum$为前$i-1$个数的和。考虑如何维护前$i$个数组成的美妙的数。 假设我们已经求出区间$\[1,Sum\]$中不美妙的数的数量。然后我们要求在多了一个数$a\_i$的情况下，区间$\[1,Sum+a\_i\]$中不美妙的数的数量。 我们根据$Sum$和$a\_i$的大小关系分类讨论。

1.  如果$a_i\\leq 2Sum$，那么不美妙的数的数量不变。
2.  如果$a\_i>2Sum$，那么不美妙的数的数量会多$\\left \\lceil \\frac{a\_i}{2}\\right \\rceil-Sum-1$个，我们加上即可。

不会严格证明为什么这样是对的。