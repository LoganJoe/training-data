---
title: " DTOJ1475树\t\t"
tags:
  - 可持久化线段树
url: 3567.html
id: 3567
categories:
  - Solution
date: 2018-08-25 21:00:13
---

三个询问其实是一个。

对于树上路径的计数问题，我们可以树上主席树，然后把区间第k小那一套丢到树上。就可以用四个点直接在树上找第k小。那么对于一条$a$到$b$的路径，我们可以算出其路径上点数为$tot=deep\[a\]+deep\[b\]-2deep\[lca\]+1$，那么第一个询问$k=1$,第二个询问$k=tot$,第三个询问$k=\\frac{tot}{2}+1$。