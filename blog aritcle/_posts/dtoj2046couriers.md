---
title: " DTOJ2046Couriers\t\t"
tags:
  - 可持久化线段树
url: 770.html
id: 770
categories:
  - Solution
date: 2018-02-25 21:07:21
---

将询问离线，按照右端点排序，每次询问一段区间内出现次数最多的数。 考虑主席树，对于每个位置开一棵线段树，记录数字i出现的次数及区间内每个数字出现次数的和。 由于找的是出现次数大于(r-l+1)/2的数，那么这样的数在一段区间内至多只有一个。直接往数字个数较大的区间跑即可。