---
title: " DTOJ4123全连\t\t"
tags:
  - dp
url: 6491.html
id: 6491
categories:
  - Solution
date: 2019-02-19 21:12:04
---

显然有一个$n^2$的dp，$f\[i\]$为前$i$个字符，满足要求可以做出的最大贡献。枚举上一个最后选了哪个来转移。 简化一下题面，对于当前$i$，仅有在$1...i-t\_i$中的可以做贡献，而其只有在$i+t\_i$之后才能做出贡献。 按照时间维护树状数组，每次相当于在$\[1,i-t\_i\]$间取前缀最大值。而对于第二个限制，我们令$i$在$i+t\_i$的时候再被加进树状数组即可。 因为开了$o2$，所以$O(n \\log n)$是可以过的。