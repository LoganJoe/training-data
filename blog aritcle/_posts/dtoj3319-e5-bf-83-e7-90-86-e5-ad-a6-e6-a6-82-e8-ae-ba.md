---
title: " DTOJ3319心理学概论\t\t"
tags:
  - 二分
  - 线段树
url: 3184.html
id: 3184
categories:
  - DTOJ
  - Solution
date: 2018-07-31 10:51:35
---

先考虑暴力。 我们可以把篮子按$a\_i$排序，显然第一只兔子肯定会吃掉一个前缀，我们可以枚举这个前缀。 那么我们可以把剩下的篮子按$b\_i$排序，显然第二只兔子肯定也会吃掉一个前缀，再枚举这个前缀，就可以计算答案了。 这样时间复杂度是$\\Theta(n^2)$的。显然不能接受。 还是把篮子按$a\_i$排序。我们只考虑枚举第一只兔子要吃掉哪些篮子。 考虑第二只和第三只兔子要怎么分掉剩下的食物。 我们把剩下的食物按$b\_i$映射在数轴上，显然第二只吃前面一段，第三只吃后面一段。第二只的代价是最靠后的篮子的$b\_i$，第三只的代价是所有篮子$c\_i$的最大值。 那我们就是要对于数轴上的每个点$i$，维护$b\_i+\\max\_{j=i+1}^{n}\\{c\_j\\}$。要求支持不断插入点。因为我们可以倒着枚举第一只兔子吃掉的篮子，这样二三只兔子要分掉的篮子就是越来越多的。 插入一个点，会对$\\max\\{c\_j\\}$产生影响。显然会影响的位置肯定是一段连续的区间，因为$\\max\\{c\_j\\}$是单调不增的。 那么我们可以二分出要修改的区间，然后修改即可。 区间修改可以用线段树完成，如果同时维护区间$\\max\\{c\_j\\}$的最小值，二分可以变为在线段树上二分，可以少掉一个$\\log$。 线段树再维护一个$b\_i+\\max\_{j=i+1}^{n}\\{c_j\\}$的最小值即可更新答案了。 时间复杂度$\\Theta(n\\log n)$。