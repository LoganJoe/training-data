---
title: " DTOJ175480人环游世界\t\t"
tags:
  - 费用流
url: 3147.html
id: 3147
categories:
  - Solution
date: 2018-07-29 12:20:18
---

这题的限制让人闻到了一股网络流的香味。 其实主要是限制很杂，然后又都能用网络流建图来表示。 对于经过人数的限制，我们可以将所有的国家拆成入点和出点，之间连上容量为$v\_i$,费用为0的边。 一条边则在出点向入点连容量inf，费用为机票费的边。 然后你发现，这题M个人的限制很不好解决，并且￥v\_i￥的限制是 有且仅有。 淦。 其实还是费用流，但是是无源汇带上下界费用流。 不存在源汇，自己先建一个超级源汇S,T，然后连上INF。 构建一个发配源，连上S流量为m费用为0。 构建一个新超级源汇。 对于每个点，拆点：

*   超级源点向$x$连一条容量为$v\[x\]$，费用为$0$的边；
*   $x'$向超级汇点连一条容量为$v\[x\]$，费用为$0$的边；
*   源点向$x$连一条容量为$inf$，费用为$0$的边；
*   $x'$向汇点连一条容量为$inf$，费用为$0$的边。
*   对于原图一条$u->v$，费用为$w$的边;$u'$向$v$连一条容量为$inf$，费用为$w$的边。

native。