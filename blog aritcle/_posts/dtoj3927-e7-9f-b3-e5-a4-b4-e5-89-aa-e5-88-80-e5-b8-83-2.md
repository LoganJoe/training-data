---
title: " DTOJ3927石头剪刀布\t\t"
tags:
  - 状压dp
url: 4109.html
id: 4109
categories:
  - Solution
date: 2018-10-15 12:45:35
---

显然，胜利序列会长成012012....01201这样的形式。

那么我们考虑压缩一个三位的三进制位来分别记录对应末尾最长胜利序列的状态。$f\[i\]\[j\]\[k\]$表示做到前$i$个，最长胜利序列长度为$j$，状态为$k$的答案。那么dp的时候就直接枚举最后一位的状态就可以转移了。

具体代码实现上有很多细节，并且一点卡常。