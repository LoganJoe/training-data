---
title: " DTOJ3778染色\t\t"
tags:
  - 思路
  - 群论
url: 2621.html
id: 2621
categories:
  - DTOJ
  - Solution
date: 2018-07-03 19:51:45
---

先考虑$L=N$的情况，裸的Polya定理。 再考虑剩下的情况。（抄题解了 只考虑$L\\geqslant 4$的情况。 ?是一个长度为$L-3$的块。 a?bcd->ca?bd->cda?b->ca?bd->bca?d->a?dbc 也就是说任意长度为$3$的都可以循环移位。 a?bcd -> a?cdb -> ab?cd 也就是说任意长度为$L−2$的都可以循环移位。 那么再根据$L$的奇偶性讨论一下。

*   $L$为偶数。那么$L-2$为偶数，而$3$为奇数，说明任意相邻的位置都可以互换。那么本质不同的方案就只和每种颜色的数量有关了，即$\\binom{N+K-1}{K-1}$。
*   $L$为奇数。再讨论一下。
    *   如果有颜色出现了两次。那么发现 ?a?a?bc?->aabc????->acab????->aacb????->?a?a?cb? 任意相邻的还是可以互换。
    *   如果颜色互不相同。那么有 ?a?b?->ab ab?cd?->abcd??->badc??->ca?dc? 也就是说每个颜色互不相同的组合对应着两种合法的方案。那么这类情况的总方案就是$\\binom{N+K-1}{K-1}+\\binom{K}{N}$。