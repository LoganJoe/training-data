---
title: " DTOJ1405战斗力\t\t"
tags:
  - dp
  - 容斥
url: 2896.html
id: 2896
categories:
  - DTOJ
  - Solution
date: 2018-07-21 22:38:51
---

题意就是，求满足排完序后，对应位置都小于给定数列的数列个数。其中给定数列是已经按从小到大排序后的。 记$f\[i\]$为前$i$位满足条件的数列个数。 直接求不是很好求，我们考虑容斥，用所有情况减去不合法的情况。 我们仅考虑排完序后第$i$位一定满足限制的数列个数，有$a\_i^i$种。 我们可以枚举排完序后第一个不满足限制的位置$j$，计算方案数。 我们要先选出$j-1$个合法的位置，也就是$\\binom{i}{j-1}$。 而排完序后的前$j-1$个数有$f\[j-1\]$种不同的取值。 由于第$j$个不合法，所以剩下的数都$\\geqslant a\_j$，并且所有数都$<a\_i$，那么方案数就是$(a\_i-a\_j)^{i-j+1}$。 那么就是要减去$\\binom{i}{j-1}\\times f\[j-1\]\\times (a\_i-a_j)^{i-j+1}$。 枚举所有的$j$扣去对应的方案数即可。 最后$f\[n\]$就是答案。