---
title: " BZOJ4000[TJOI2015]棋盘\t\t"
tags:
  - 状压dp
  - 矩阵
url: 6362.html
id: 6362
categories:
  - BZOJ
  - Solution
date: 2019-02-06 22:26:22
---

发现$M\\leq 6$，我们可以考虑状压。 记$f\[i\]\[j\]$为前$i$行，其中第$i$行放的棋子的状态为$j$的方案数。 我们可以模拟一遍判断出状态$x$和状态$y$成为相邻的两行是否合法。 如果状态$j$与状态$k$相邻合法，那么$f\[i\]\[j\]$就可以转移到$f\[i+1\]\[k\]$。 这个转移显然可以写成矩阵的形式。 我们用矩阵快速幂优化dp即可。 时间复杂度$\\Theta(2^{3M}\\log N)$。