---
title: " DTOJ2890联通能力\t\t"
tags:
  - 思路
  - 树形dp
url: 2385.html
id: 2385
categories:
  - Solution
date: 2018-06-13 21:39:58
---

我们思考要如何计算结点其它结点的距离最大值的最小值。 很直观的，这个点一定会在当前树的直径上。因为其他点都可以到达树根然后走最长链，比在最长链上的点更不优。 那么我们对于每个点，从子树更新最长链和次长链。 以下的树均是当前考虑的子树，根为当前节点。 由于树的直径不一定过根，那么我们记录子节点中的直径长度。如果直径不过根的话则可以直接传下面的答案。考虑直径过根的情况。 我们所要找的那个点一定会在最长链上。因为很明显他的最大距离是先走到根然后走次长链。其他链上的均会走最长链。 那么我们要暴力跳链，跳到最长距离走次长链的临界点，即他的父亲的最长链长度大于到根再走次长链的长度的点。然后考虑要选它还是它的父亲。然后记录这个子树的答案就好了。