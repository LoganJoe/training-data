---
title: " DTOJ2911分组\t\t"
tags:
  - dp
  - 思路
url: 5126.html
id: 5126
categories:
  - Solution
date: 2018-11-13 17:59:53
---

首先考虑极差这个东西。我们在实际选取的时候肯定是要选取排序后连续的一段，这一段里面的极差才会最小。

设状态$f\[i\]\[j\]\[k\]$为从小到大处理到前$i$个人，还有$j$组可以塞人，当前代价和为$k$的方案数。

先令$k'=k+(s\[i\]-s\[i-1\])\\times j$然后考虑分类讨论：

*   让这个人自成一组，并且不让其他人加入这个组：$f\[i-1\]\[j\]\[k\] \\to f\[i\]\[j\]\[k'\]$
*   让这个人自成一组，并且让其他人加入这个组：$f\[i-1\]\[j\]\[k\] \\to f\[i\]\[j-1\]\[k'\]$  
    
*   让这个人进入某一组，然后封闭这个组。我们可以将其塞进$j$个组中任一组：$f\[i-1\]\[j+1\]\[k\]\\times j \\to f\[i\]\[j\]\[k'\]$
*   同理还有这个人进入某一组，但是不封闭这个组：$f\[i-1\]\[j\]\[k\]*j \\to f\[i\]\[j\]\[k'\]$。

按照这样分类讨论就可以转移了。