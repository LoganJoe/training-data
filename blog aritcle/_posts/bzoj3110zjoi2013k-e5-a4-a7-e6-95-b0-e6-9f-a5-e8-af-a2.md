---
title: " BZOJ3110[ZJOI2013]K大数查询\t\t"
tags:
  - 整体二分
url: 154.html
id: 154
categories:
  - BZOJ
  - Solution
date: 2018-01-08 10:20:15
---

显然单个询问是可以二分答案的。那么我们考虑对整体进行二分。 假如我们已经知道了答案在\\(\[l,r\]\\)的询问，和加的数也在\\(\[l,r\]\\)中的修改，并且都已按照时间顺序排序，我们按照时间顺序处理询问和修改。 如果\\((mid,r\]\\)中数的个数\\(cnt\\)小于当前询问的\\(K\\)，则这个询问的答案是\\(\[l,mid\]\\)中的第\\(K-cnt\\)大，否则是\\((mid,r\]\\)中的第\\(K\\)大。 所以我们处理询问的时候要维护某段区间中大小在\\((mid,r\]\\)中数的个数，支持区间求和和区间加，在\\(logn\\)的时间内维护即可。 这样我们就知道了答案在\\(\[l,mid\]\\)的询问，\\((mid,r\]\\)的同理，就可以继续二分了。 题目中有说加的数的绝对值\\(≤n\\)，因此所有询问的答案一定在\\(\[-n,n\]\\)中。 注意题目求的是第\\(K\\)大，不是第\\(K\\)小。