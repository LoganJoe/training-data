---
title: " DTOJ4132循环流\t\t"
tags:
  - 构造
url: 6539.html
id: 6539
categories:
  - DTOJ
  - Solution
date: 2019-02-22 15:16:32
---

可能的图有很多很多种，因此我们可以大胆猜想很多情况都合法。 考虑什么时候是无解的。 首先$a+b<n$一定无解，因为无法形成弱连通图。 $a=1$也是无解的，这很显然。 其余情况我们可以考虑用$1$边和$2$边分别构造若干个环，然后将它们组合起来即可。 $n=2$时比较特殊，因为只能构造出大小为$2$的环。因此$n=2$的情况我们先特判。 $n=2$时$a$为奇数时无解，$a=0$且$b$为奇数时也无解，其余情况都有解。因为一条$1$边和一条$2$边可以合起来当成一条$1$边，因此一定能组成若干个大小为$2$的环。 接着考虑$n>2$的情况。 $a+b>n$一定有解。若$b\\neq 1$就用$1$边和$2$边先分别构造出两个环，然后共用一些点连起来，若还有多余的边就随便组成几个小环用掉。若$b=1$则合起来当一条$1$边，这时有$a\\geq n$，显然也可以通过若干个环构造出合法解。 由于有解一定要$a+b\\geq n$，现在就只剩下$a+b=n$的情况了。 这种情况只有$a=0$或$b=0$是无解的，因为$1$边和$2$边一定属于两个不同的环，至少需要$n+1$条边。 单次时间复杂度$\\Theta(1)$。 数据范围这么小是为了给某些人暴力DP再记忆化的233