---
title: " DTOJ3756宿营\t\t"
tags:
  - dp
url: 2468.html
id: 2468
categories:
  - DTOJ
  - Solution
date: 2018-06-15 22:39:34
---

发现题目限制了很多情况：同行同列最多只有两个帐篷，有帐篷的行和有帐篷的列不能同时有帐篷。 考虑dp。 记$f\[i\]\[j\]$为前$i$行中，有$j$列是完全空的方案数。 考虑接下来要怎么放帐篷。

1.  可以在一行放两个帐篷，这两个帐篷的方向是确定的。那么有$$f\[i\]\[j\]\\times \\binom{j}{2}\\Rightarrow f\[i+1\]\[j-2\]$$
2.  可以在这一行放一个任意方向的帐篷。那么有$$f\[i\]\[j\]\\times 4j \\Rightarrow f\[i+1\]\[j-1\]$$
3.  可以在一列放两个帐篷，这两个帐篷的方向也是确定的。由于之前行的状态已经确定了，那么只能考虑放在后面几行。那么有$$f\[i\]\[j\]\\times j\\times (n-i-1)\\Rightarrow f\[i+2\]\[j-1\]$$

最后$\\sum_{i=0}^{m-1}f\[n\]\[i\]$即为答案。