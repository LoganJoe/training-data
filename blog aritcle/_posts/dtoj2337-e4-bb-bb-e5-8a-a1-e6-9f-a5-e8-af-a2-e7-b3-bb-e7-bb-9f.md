---
title: " DTOJ2337任务查询系统\t\t"
tags:
  - 可持久化线段树
url: 465.html
id: 465
categories:
  - Solution
date: 2018-02-04 12:41:42
---

可以想到，按照时间点建立主席树，对于每个任务，在$S\_i$棵的$P\_i+1$,在$E\_i+1$棵的$P\_i-1$。将Pi离散化后较能接受。 但是如何修改主席树？ 我们把每个任务拆成如上的两次修改，然后按照时间轴排序。对于树i,可以刚开始完全等于树i-1,然后面对每个修改相当于把这棵树作为历史版本，然后根据需要新建若干条树链。这样就可以完成建树了。 而查询的话，直接在第$X_i$棵树上进行查询就可以了。