---
title: " DTOJ3532老虎机\t\t"
tags:
  - dp
  - 思路
url: 641.html
id: 641
categories:
  - DTOJ
  - Solution
  - 不会证
date: 2018-02-17 19:34:51
---

由于只要两个颜色相同的球，所以我们没必要在三台老虎机取。 记第$i$台老虎机里球的不同颜色数为$cnt\[i\]$。 先考虑在只一台老虎机取就结束的情况，答案显然是$min(cnt\[i\]+1)$，其中第$i$台老虎机必须要有颜色重复的球。 再考虑在两台老虎机取的情况，现在重复的球已经没有用了，因此我们可以去重。 显然得到第$i$台中任意一个球的代价都是$cnt\[i\]$。记得到颜色$i$的球最小代价为$f\[i\]$。 对于第$i$台机器，将每种颜色的球按$f\[i\]$从大到小排序后（因为这是最坏情况），我们有一个代价$\\leqslant f\[col\[i\]\[j\]\]+j$的方案结束，其中$col\[i\]\[j\]$是第$i$台机器排序后第$j$个球的颜色。 现在证明结束的代价$\\geqslant f\[col\[i\]\[j\]\]+j$。 假设我们在第$i$台机器结束，第$i$台机器中与我们手上颜色重复的球最小的排名为$p$，此时结束的代价$\\geqslant p+cnt\[i\]$，同时有$f\[col\[i\]\[p\]\]+j\\leqslant p+cnt\[i\]$，即在其他机器拿到这个球结束的代价。 证毕。 （其实证明是我瞎口糊的因为我也不是很会讲，我觉得结论挺显然的（雾）） 因此答案为$min(f\[col\[i\]\[j\]+j)$。 我们要维护$f\[i\]$的最小值和次小值，因为得保证两个球不是都从同一台机器取的（这台机器这种颜色的球可能只有一个）。