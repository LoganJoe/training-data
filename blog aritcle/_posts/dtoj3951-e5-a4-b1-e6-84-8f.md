---
title: " DTOJ3951失意\t\t"
tags:
  - 思路
url: 4337.html
id: 4337
categories:
  - Solution
date: 2018-10-22 18:44:37
---

选M个区间，交集最大。

其实有更好写的$O(n\\log n)$做法，这里讲一讲$O(n)$的写法。

我们用一个链表来维护所有区间。链表中的元素以$l$为关键字排序。

这时候我们就可以维护左端点了。考虑维护右端点的位置。

将所有区间再按照右端点排序，对于每个区间考虑，这个时候能取的区间就是左端点在$r$前，右端点在$r$外的所有区间。这些区间就是链表前到当前$pos$的部分。取出其中m个区间，这个时候就可以得到一个答案，此时交集区间的右端点为$r$，左端点为$Max_l$。

考虑右端点向后推。当前区间肯定不能再作为贡献，必须在链表中删掉。假设当前这个区间在前面这$m$个区间中，那么$pos$指针就可以移向下一个元素，即当前这个区间删掉以后要再补一个区间。

这样就可以求出最长交集长度了。考虑方案。

任意输出一个方案即可。所以我们还是按照这个方法模拟。注意到在$pos$之前的都是选择的区间，于是当找到第一个ans的位置的时候，将链表开头到$pos$的所有区间输出即可。