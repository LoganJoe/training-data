---
title: " DTOJ3976植物大战僵尸\t\t"
tags:
  - 数位dp
url: 4256.html
id: 4256
categories:
  - Solution
date: 2018-10-20 16:25:13
---

题目大意：让你扮演僵尸，在只有2条草坪，对方每一时刻只有火爆辣椒。求你能够赢的第一步的方案数。

首先考虑一个状态是否是必胜态。如果只有一个位置有僵尸，那么如果这个位置有$2^i$个僵尸，那么你一定赢。否则，你起码需要让这$x$个僵尸向前走$k$步，走完$k$步后，恰好满足$x\\geq 2^{i-k}$，我们就称这些僵尸向前走$k$步后必胜。现在证明如果$\\sum_{i=1}^{m}2^{m-k_i} \\geq 2^m$，那么你一定必胜。假设你有2个位置，每个位置的$k=1$。如果你把两个位置的僵尸错开，那么你是可以必胜的。其他情况就推广一下就好了。

由于$x\\geq 2^{i-k}$，所以$ax\\geq 2^i$。我们把这些位置从大到小以低位到高位编号，我们就可以把每一个位置的每一个数当做他的权值。那么整个僵尸序列就可以当做一个向前进位的二进制数，如果可以把这个二进制串进位，进位后编号为0的位置的数不进位下是大于0的，那么这样就一定是一个必胜态。

由于僵尸是被烧的，所以如果你把这些僵尸分成两份，每一份都是必胜的，那么这种分发就是合法的。注意，由于僵尸会前进，所以僵尸分成2份后，不是进位到0，而是进位到1。

我们假设原来的数进位完为$a$，分完后第一份的数为$x$（与上面的那个不同），第二份为$y$。然后再假设最高为的数为1，其他位为0的数为$m$。那么我们就是要找到所有满足

$$\\begin{cases}x+y=a\\\x\\geq m\\\y\\geq m \\end{cases}$$

的划分。这样明显是数位dp。

这样以来就可以解决$a\_i\\leq 20$的情况了。（虽然数据中并没有$a\_i\\geq 10$的点）。

然后考虑如果把所有僵尸放置在一个点上，这样也之会进位11位，而已经处理完的低位不会再影响高位。所以我们只需要记录从某一位置往前11位的值就可以了。现在考虑低位的数如何处理。我们只需要记录低位数字与原始数字的大小关系就好了。转移时注意一下就好了。