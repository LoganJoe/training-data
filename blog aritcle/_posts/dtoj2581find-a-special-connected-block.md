---
title: " DTOJ2581Find a special connected block\t\t"
tags:
  - 状压dp
  - 随机化
url: 848.html
id: 848
categories:
  - DTOJ
  - Solution
  - 不会证
date: 2018-03-02 21:38:28
---

如果权值只有$k$种，我们可以通过状压dp求出答案。即用$f\[i\]\[j\]\[S\]$表示已选$S$中的权值，且选了位置$(i,j)$的最小代价。然后spfa转移。 考虑随机化。将所有权值随机对应到$\[1,k\]$中的一种，再通过状压dp求出此时的最优解。此时的最优解一定不优于原最优解，但是等于最优解的概率不低于$\\frac{k!}{k^k}$（不会证）。 那么只要随机多次取最优解即可。我随机了$500$次。别人$400$次都过了就我被卡…