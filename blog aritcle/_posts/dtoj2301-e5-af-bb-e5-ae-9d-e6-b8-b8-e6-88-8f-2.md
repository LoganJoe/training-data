---
title: " DTOJ2301寻宝游戏\t\t"
tags:
  - 虚树
url: 3770.html
id: 3770
categories:
  - Solution
date: 2018-08-30 18:19:17
---

将宝物消失和出现看做删点和加点。

同时为了保证树上的形态不变，我们还要记录其他信息。这题里，我们要使用lca计算路径长度。

于是我们只需要维护一棵虚树就好了。答案是虚树上路径长度*2。

可以用set维护，按照dfs序维护有宝物的点，每次操作找到这个点的前驱后继然后维护距离就好了。