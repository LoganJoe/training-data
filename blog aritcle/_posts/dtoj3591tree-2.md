---
title: " DTOJ3591tree\t\t"
tags:
  - 线段树合并
url: 2412.html
id: 2412
categories:
  - Solution
date: 2018-06-14 15:40:23
---

同FJOI2018D2T2. 就是对很多条链求LIS...?大概是这样理解的。 想一个dp：$f\[i\]\[j\]$表示以$i$为根的子树中，最大值取到$j$，最多能取到的点的数量。这个的转移是$n^2$的，需要枚举子树中的所有节点。 考虑用数据结构要如何维护。对于每个点建立线段树保存子树的答案。线段树合并答案。为了能够实现转移，设一个$g\[i\]\[j\]=f\[\[i\]\[j\]-f\[i\]\[j-1\]$，然后操作就是在$val$处加1，在第一个不为零的$i$处-1。