---
title: " DTOJ2337任务查询系统\t\t"
tags:
  - 可持久化线段树
url: 743.html
id: 743
categories:
  - DTOJ
  - Solution
date: 2018-02-25 20:24:17
---

先将优先级离散化，然后就可以用主席树用类似维护区间第$k$小的方法维护前$k$小的优先级之和。 具体地，将一个任务看作第$S\_i$秒加入，$E\_i+1$秒删除。 建立时间轴的可持久化线段树。对于线段树上的每个节点，维护当前正在运行的任务中，优先级离散完在这段区间内的任务个数和优先级之和。 查询的时候和区间第$k$小一样。若左儿子的任务数量$\\geqslant k$，就往左儿子走，否则往右儿子走。