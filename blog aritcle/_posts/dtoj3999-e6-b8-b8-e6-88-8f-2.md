---
title: " DTOJ3999游戏\t\t"
tags:
  - 贪心
url: 5222.html
id: 5222
categories:
  - Solution
date: 2018-11-22 13:26:27
---

假设没有取模，这就是一道经典的贪心问题，NOIP2018的原题。 那么还是考虑对于A的差分数组B。原来的代价是$\\sum \\max(B\_i,0)$。而这里我们就多了对于一段整体加$k$，也就是$B\_l+k,B\_r-k$。 那么考虑要减小答案，显然是在$B\_r$为正，$B\_l$为负的时候才有可能减小ans，并且要有$k+max(B\_r-k,0)-max(B\_l+k,0)>0$才有贡献。 那么每次我们对于$B\_i<0$，将其$B\_i+k$丢进桶里面，然后对于$B\_i>0$则扫一遍桶，从桶中取贡献最大的更新。扫一遍桶的复杂度是$O(k)$的，因此最后复杂度是$O(nk)$的。