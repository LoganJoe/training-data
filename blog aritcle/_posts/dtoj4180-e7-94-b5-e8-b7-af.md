---
title: " DTOJ4180电路\t\t"
tags:
  - 构造
url: 6639.html
id: 6639
categories:
  - DTOJ
  - Solution
date: 2019-02-25 08:35:46
---

原图中有$2n$个度数为奇的点，而铜丝的接头只有$2m$个，所以当$m<n$时一定无解。 而剩下情况都有解，我们可以分情况构造。 记$S1,S2,S3$分别为长度为$1$、长度为$2$和长度$\\geq 3$的铜丝的集合。然后我们开始分类讨论。 如果$|S1|+|S2|\\geq n-1​$。我们用集合$S1,S2​$一定能填满所有竖线，剩下最外一圈就依次放剩下的铜线即可。 如图 ![](http://www.dtenomde.com/wp-content/uploads/2019/02/TIM图片20190224205905.png) 否则，我们考虑将问题规模逐步缩小，即一步步填满$n$个格子。 如果$|S1|+|S2|<n-1$，显然$S3$非空，我们任选一个$S3$中的铜丝，再从$S1,S2$中选出若干条，使得上面所说的构造可以使用。 设从$S3$选的铜丝长度为$len$，我们要从$S1$中选$a$条，$S2$中选$b$条。 那么就是要满足$a\\leq |S1|,b\\leq |S2|,len+a+2b=3(a+b+1)$，即$len-2a-b=3$。这样我们就可以一次填满$a+b+1$个格子了。 若$len$为奇数或者$|S2|>0$，我们令$a=\\min(|S1|,\\left \\lfloor \\frac{len-3}{2}\\right \\rfloor),b=len-2a-3$就可以得到一组合法解。 如果还不行，也就是$S3$中的铜丝长度都为偶数，且$S2$为空。 那么我们从$S3$中任选两条铜丝，记长度分别为$2a,2b$。仍然尝试着从$S1$中选若干条铜丝，记选了$c$条。 那么就是要满足$2a+2b+c=3(1+1+c)$，解得$c=a+b-3$。 现在就是要搞一个新构造了。 如图 ![](http://www.dtenomde.com/wp-content/uploads/2019/02/TIM图片20190224211438.png) 将长度为$2a$的放在最左侧，第一排长度为$a-1$，第二排长度为$a$，然后将长度为$2b$的铜丝弯曲放置（蛇形走位），剩下的填长度为$1$的即可。