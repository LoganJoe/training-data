---
title: " DTOJ4123全连\t\t"
tags:
  - dp
url: 6497.html
id: 6497
categories:
  - DTOJ
  - Solution
date: 2019-02-20 21:19:31
---

考虑dp。 记$f\[i\]$为前$i$个音符最多可以得到的分数。 考虑上一个点击了什么音符来转移。有 $$ f\[i\]=\\max_{j=0}^{i-1}\\{f\[j\]\\}+a\_i\\cdot t\_i $$ 其中，$j$要满足$j+t\_j\\leq i,i-t\_i\\geq j$。 我们可以按$i-t\_i$从小到大的顺序依次求每个$f\[i\]$，这样前面可以转移的$j$到后面仍然可以转移。 那我们就可以用一个树状数组优化转移了，即在位置$j+t\_j$插入一个决策，在位置$i$查询最优决策。 时间复杂度$\\Theta(n\\log n)$。