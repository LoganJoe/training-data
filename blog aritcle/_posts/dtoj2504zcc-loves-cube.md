---
title: " DTOJ2504ZCC loves cube\t\t"
tags:
  - dp
  - 思路
url: 3482.html
id: 3482
categories:
  - DTOJ
  - Solution
date: 2018-08-17 22:32:58
---

从正面看过去，每列都是独立的，那么我们可以分别计算方案数。 先考虑一列的方案数。记$f\[i\]\[j\]\[k\]$为这一列放了前$i$排，最高高度为$j$，一共放了$k$块的方案数。 那么有 $$f\[i\]\[\[j\]\[k\]\\Rightarrow f\[i+1\]\[\\max(j,s)\]\[k+s\]$$ 在考虑全部的方案数，由于每列是独立的，可以通过对$f\[n\]\[i\]\[j\]$做背包得到。 记$g\[i\]\[j\]\[k\]$为前$i$列，每列最高的高度和为$j$，一共放了$k$块的方案数。 那么有 $$g\[i\]\[j\]\[k\]\\times f\[n\]\[l\]\[s\]\\Rightarrow g\[i+1\]\[j+l\]\[k+s\]$$ 最后，我们对于每个$g\[n\]\[i\]\[m\]$，在三种颜色中选一种的$i$个作为正面，再乘上剩下$m-i$个随意排列的方案数，累加起来即可。