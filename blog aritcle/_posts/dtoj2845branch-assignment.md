---
title: " DTOJ2845Branch Assignment\t\t"
tags:
  - dp
  - 决策单调性
url: 6370.html
id: 6370
categories:
  - Solution
date: 2019-02-07 12:11:17
---

考虑每个点，处理出其到总部的距离和总部到这个点的距离。那么假设其处于一个$k$点的块内，那么这两个距离都会被贡献$k-1$次。 考虑dp。显然按照这两个距离之和排序，取连续的一段的代价最优。对这个距离取前缀和，$f\[i\]\[j\]$为前$i$个点分$j$个块的最小代价。那么有 $$f\[i\]\[j\] = min( f\[k\]\[j-1\] + ( i - k - 1 ) \\times ( sum\[i\] - sum\[k\] ) )$$ 直接dp是$O(n^3)$的。但是考虑到，对于同一个位置$i$，随着$j$变大，$k$的最优决策点也是单调不减的。因此维护一个指针，效率就变成了$O(n^2)$。