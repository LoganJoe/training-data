---
title: " DTOJ2322雅加达的摩天楼\t\t"
tags:
  - 奇技淫巧
  - 最短路
url: 4575.html
id: 4575
categories:
  - Solution
date: 2018-10-25 20:38:06
---

首先一个比较明显的思路是，既然doge不能先到一个位置，我们只能用最短路连边，对于一个位置$b\[i\]$，向$b\[i\]+kp\[i\]$连$|k|$长度的边。但是这样连边是极限$O(n^2)$的，过不去。 考虑将点分为$p\[i\]$大于和小于$\\sqrt{n}$两部分。对于大于$\\sqrt{n}$的$p\[i\]$直接向外连边。这样边数极限是小于$O(n \\sqrt {n})$。 对于小于$\\sqrt{n}$的部分，我们另外建出$\\sqrt{n}$层的点。对于第$i$层的点，我们令其中每个点$j$向同层的$j+i$与$j-i$连长度为$1$的边，向原图中的对应点连长度为$0$的边。而对于原题中的一个$p\[i\] \\leq sqrt{n}$的点，向$p\[i\]$层的对应点连长度为$0$的边。