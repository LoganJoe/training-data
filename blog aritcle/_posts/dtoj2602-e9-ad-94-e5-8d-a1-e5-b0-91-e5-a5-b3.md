---
title: " DTOJ2602魔卡少女\t\t"
tags:
  - 线段树
url: 3737.html
id: 3737
categories:
  - DTOJ
  - Solution
date: 2018-08-28 21:38:31
---

异或每位是独立的，我们按位拆开考虑。 考虑线段树。 考虑如何求一个点所代表的区间的子区间有多少个异或值为$1$的。 显然只用考虑跨过区间中间的的区间。 那么就是左儿子的后缀和右儿子的前缀拼起来异或值为$1$。 我们再维护每个点有多少个前缀/后缀异或值为$1$，同时维护每个点的区间长度和异或即可。