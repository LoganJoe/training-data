---
title: " DTOJ3618Gambling Guide\t\t"
tags:
  - 思路
  - 最短路
  - 期望
url: 6200.html
id: 6200
categories:
  - Solution
date: 2019-01-26 13:51:04
---

考虑题目所给的条件，$E\_x$为从$n$点出发到达$x$点的期望。很容易列出dp方程： $$ E\_x = \\frac{\\sum{\\min(E\_x,E\_y)}}{\\deg\_x}+1 $$ 考虑这个要如何转移。由于这个东西不仅依赖当前的$E\_x$的值，还依赖其他点的值。这个很不好转移。但可以发现，很多转移边是没有用的。 我们考虑当前点为$x$，指向点为$y$，期望值为$f\[x\]$。当$f\[x\]<f\[y\]$时，我们用$f\[x\]$去更新$f\[y\]$。 假设$f\[y\]​$是第一次被更新，那么很容易可以解得：$f\[y\]=f\[x\]+\\deg\_y​$。否则，我们从$f\[y\]​$第一次转移的点$z​$，同样可以解得：$f\[y\]=\\frac{f\[x\]+f\[z\]+\\deg\_y}{2}​$。之后的转移也类似。于是我们在最短路更新过程的时候转移，每次记下当前是第几次转移到这个点即可。