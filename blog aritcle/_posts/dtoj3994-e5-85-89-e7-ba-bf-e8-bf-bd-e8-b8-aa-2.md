---
title: " DTOJ3994光线追踪\t\t"
tags:
  - 线段树
url: 5132.html
id: 5132
categories:
  - Solution
date: 2018-11-16 13:03:32
---

可以想到把问题转到极角上解决。那么每次放一个矩形，只有左边和下边的边会有阻挡效果。那么其挡掉的范围就可以对应到极角上的一段区间。将横着和竖着的分开考虑，那么加一个矩形就是极角的区间覆盖，而查询就是对于某个极角序取最小的矩形标号。这就是一个经典的线段树问题了。离散后在线段树上操作即可。这里对于同极角的只要比较横坐标或者纵坐标就好了。 然后有一点点细节。无伤大雅。 注意特判$x=0$或$y=0$的情况。