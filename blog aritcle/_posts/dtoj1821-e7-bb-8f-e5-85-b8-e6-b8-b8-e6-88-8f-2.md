---
title: " DTOJ1821经典游戏\t\t"
tags:
  - 树形dp
url: 4979.html
id: 4979
categories:
  - DTOJ
  - Solution
date: 2018-11-01 21:22:44
---

题意严重不清，严重差评。 题意是攻打第$i$个点需要$T\[i\]$的时间，你打点$i$时，点$i$有个兄弟（同父亲的节点）已经打过了，那么你打完点$i$后就得先去打点$i$的父亲。打完第$n-1$个点就结束，问最晚的结束时间。 给的可能是一个森林，显然与第$n-1$个点不在同一棵树内的点可以全部打完，那么我们就只用考虑在第$n-1$个点所在的树内怎么打。 考虑树形dp。 记$f\[i\]$为只考虑以$i$为根的子树，打了点$i$且点$i$的儿子只打了两个的最晚结束时间，$g\[i\]$为没打点$i$的最晚结束时间，$Sum\[i\]$为以$i$为根的子树所有点的时间和。 那么$g\[i\]$一定是某个儿子的$Sum$加上其它儿子的$g$，$f\[i\]$一定是某个儿子的$Sum$加上另一个儿子的$f$再加上其它儿子的$g$。 枚举儿子的同时维护一下已经选/没选$Sum$和$f$的最大值，以及当前所有儿子的$g$的和，即可求出每个点的$f$和$g$。 假如树根是$root$，那么答案就是$f\[root\]$。