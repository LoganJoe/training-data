---
title: " DTOJ1544还债\t\t"
tags:
  - 思路
url: 4292.html
id: 4292
categories:
  - Solution
date: 2018-10-21 14:01:43
---

将$i$向$A_i$连边，最后形成了一张图。对于入度为$0$的点，显然必须要政府替他还债，所以我们从入度为$0$的点开始给起。对于每个点，要给$min(B\[x\]-val\[x\],0)$的钱以供还债。其中$val\[x\]$为已经得到的钱。

跑完拓扑以后剩下一堆有向环，对于每个环先跑一遍，对于环中一点$k$及其指向$x$，如果$val\[x\]+B\[k\]<B\[x\]$，则必须给其一定钱使得$x$得以还债，需要付出$B\[x\]-B\[k\]-val\[x\]$，此时$val\[x\]=B\[x\]-B\[k\]$.

而后我们得到一个环，该环中所有点$x$均满足$val\[x\]+B\[k\] \\geq B\[x\]$。

这个时候我们要找到一个点，使得给钱使得整个环被消去。即找一个最小点，付出$min(B\[x\]-val\[x\],0)$，就可以消掉整个环。

消掉所有环以后就算出最小花费了。