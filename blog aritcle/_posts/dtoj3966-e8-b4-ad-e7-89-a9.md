---
title: " DTOJ3966购物\t\t"
tags:
  - dp
url: 4176.html
id: 4176
categories:
  - Solution
date: 2018-10-17 21:47:42
---

让我来讲一种不寻常的解法。

考虑dp,令$F\[i\]\[j\]$表示前$i$个数，$j$是不是美妙的（记为1）。由于1基本是连续的，那么就用区间来存储。

考虑一个区间$l,r$。如果$\[l,r\]$中的数都是美妙的，那么$2l$和$r$都一定可以被买出来，那么在加入一个数$a\[i\]$时，$\[(2l+a\[i\])/2,r+a\[i\]\]$也一定都是1。

因为$2l \\leq r$，所以区间不会多于$log$个，所以暴力更新就好了。