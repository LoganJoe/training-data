---
title: " DTOJ4135最短路\t\t"
tags:
  - 二分
  - 思路
  - 最小割
url: 6553.html
id: 6553
categories:
  - DTOJ
  - Solution
date: 2019-02-22 22:20:17
---

神奇的网络流建图。 显然答案是可以二分的，我们二分一个答案$mid$，然后用最小割判断是否可行。 建出一个$mid$层的分层图，对于每一层，我们都将点$i$拆成两个点，分别记为入点$i$和出点$i'$。 每一层的$i$向$i'$连一条代价为$1$的边，割掉代表选择了点$i$。为了保证一个点至多只被选一次，每层的$i$要向下一层的$i'$连一条代价为$\\infty$的边。我们可以认为走到第$x$层路径长度就为$x-1$，割掉了$i$向$i'$的边就只能走到下一层的$i'$，相当于在原地不动，但路径长度$+1$。 原图中$x\\rightarrow y$的边，由$x'$向下一层的$y$连一条代价为$\\infty$的边，代表这种边不能割。 源点为第一层的$0'$，汇点为最后一层的$n-1$，每层的$n-1$向下一层的$n-1$连代价为$\\infty$的边，意味着在任意一层中走到点$n-1$都是不可行的。 对这样的图求出最小割，如果最小割$\\leq k$，就说明存在方案可以使得图中不存在长度$\\leq mid-1$的边，也就是最短路至少为$mid$，即意味着$mid$这个答案可行。