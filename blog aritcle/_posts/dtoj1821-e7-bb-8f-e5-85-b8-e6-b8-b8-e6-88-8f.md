---
title: " DTOJ1821经典游戏\t\t"
tags:
  - 树形dp
url: 4974.html
id: 4974
categories:
  - Solution
date: 2018-11-01 20:44:49
---

一道全部缺主语的shi题。

大概就是当一个点的两个子节点都被杀掉以后，这个点就必须马上被杀掉。

那么我们会觉得一直杀到根节点是最优的。

考虑树形$dp$。$f\[x\]$为$x$及其子树，$x$要选，所能花费的最大时间。$g\[x\]$为$x$及其子树，$x$不选，所能花费的最大时间。

那么对于每个点考虑分类讨论：不选儿子，选了一个儿子及其最大能选的部分，选了一个儿子及其满子树，选了一个儿子及其满子树和一个儿子及其最大能选的部分，就可以做f\[u\]$的转移了。注意到，每个点假设选了两个儿子，只有一个儿子能选满子树，另外一个点选不了满子树。

然后对于没有做到的孤点，我们把它们的答案也统计进去。