---
title: " DTOJ4224小L的占卜\t\t"
tags:
  - 可持久化线段树
url: 6946.html
id: 6946
categories:
  - Solution
date: 2019-03-12 13:19:55
---

本质就是取出现奇数次或者偶数次的数的的异或和。 奇数次的数就是区间异或和了。对于出现偶数次的异或和，我们要强制让所有数“少出现一次”。 那么对于每个相同的数，我们记一下其上一次出现的位置。那么按照位置建立主席树，主席树内维护位置，那么在上一个数出现的对应位置打上$A\[i\]$的代价。那么对应的，每次相当于查询在$l:r$线段树内，$\[0,l)$的权值异或和，这样就可以使得所有数"少出现一次"了。