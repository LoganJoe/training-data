---
title: " DTOJ3916完美匹配\t\t"
tags:
  - 状压dp
url: 3910.html
id: 3910
categories:
  - DTOJ
  - Solution
date: 2018-09-10 18:44:47
---

考虑状压dp。记$f\[i\]$为已经匹配的点状态为$i$的方案数。 那么选择两个没有匹配的点$x$和$y$，有 $$f\[i\]\\Rightarrow f\[i | 2^{x-1} | 2^{y-1}\]$$ 但直接这样转移会算重，因为从状态$i$到状态$j$可能有多种转移的顺序。 我们需要钦定一种顺序使得贡献是唯一的。 我们钦定$x$是状态$i$未匹配的点中最小的即可。 那么很多状态实际上是没有用的，比如说$011000,101000,001100$，算出来状态数只有$1.3\\times 10^6$。 那么我们写一个记忆化搜索，用hash表来存下状态即可（用map会TLE）。