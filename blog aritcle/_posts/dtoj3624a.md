---
title: " DTOJ3624a\t\t"
tags:
  - 奇技淫巧
  - 线段树
url: 1377.html
id: 1377
categories:
  - DTOJ
  - Solution
date: 2018-04-10 14:27:26
---

按位与会将某些位变成$0$，按位或会将某些位变成$1$。 容易想到用线段树维护，发现如果要修改的位的值都相同，那么可以打标记。 那如果要修改的位的值不同呢？ 一个大胆的想法：暴力修改。 其实这就是正解了。 来自题解的效率分析：

> 我们设$f(i)=f(lson\[i\])+f(rson\[i\])+\\sum_{k=0}^{20}g(i, k)$。如果$i$所代表的区间中所有数第 k 位相等，那么$g(i,k)=0$否则等于$1$。 $f(root)$一开始是$\\Theta(20N)$的，我们每次修改操作$f(root)$至多增加$20log\\space N$，而每访问一个额外节点，那么$f(root)$至少减$1$，所以复杂度是$\\Theta(20Nlog\\space N)$的。

注意判断要修改的位的值是否相同，可以用所有数的与和所有数的或来判断。 那么在线段树上维护一下标记的合并即可。即 $$((a\\&b)|c)\\&d=(a\\&b\\&d)|(c\\&d)$$