---
title: " DTOJ4130送分题\t\t"
tags:
  - 思路
url: 6576.html
id: 6576
categories:
  - Solution
date: 2019-02-24 11:04:49
---

发现，仅有两个男生不能一起上厕所。于是对于男生数$\\ge n$的情形必定无解。考虑后面，我们要尽量让男生在前面消化完，否则男生会积压到最后。更进一步的，我们要满足倒数第$i$个女生在从后往前$2i$个位置之后。 这已经有一个朴素的$O(n)$做法了。对于重复字符串，我们考虑对于每段分别处理。 我们倒着处理每一段。可以发现，对于一个重复段，其每段中相同位置的距离差最大值是线性递增或递减的。这意味着答案仅有可能在第一遍复读或者最后一遍复读中出现。那么我们仅需处理一块的差最大值，然后在第一块和最后一块的位置分别取一次答案即可。