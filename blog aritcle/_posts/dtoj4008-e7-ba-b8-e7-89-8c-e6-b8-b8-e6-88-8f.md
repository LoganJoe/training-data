---
title: " DTOJ4008纸牌游戏\t\t"
tags:
  - 博弈
  - 数论
  - 概率
url: 4788.html
id: 4788
categories:
  - Solution
date: 2018-10-30 16:27:12
---

这是一道纯数学题。

题目大意是两个人每次从一堆纸牌中选出一张纸牌，然后把这张牌的数和原数取$gcd$，并把这张牌扔掉。直到原数为1或不能取为止。求如果是随机或最优状态下，先手获胜概率。

首先考虑随机状态，我们先枚举$l$表示取了$l+1$次后游戏结束，然后再枚举一个最大公约数$k$，设在纸牌中有$a$张纸牌是$k$的倍数，那么此时的概率为:$$g\[k\]\[l\]=\\frac{\\binom{a}{l}\\times (n-l)!}{n!}-g\[kb\]\[l\](b\\geq 2,kb\\leq max_{number})$$直接求即可。

然后考虑最优状态，考虑两两求$gcd$，然后把这些中能被另一些整除的数删掉，只剩下最小的状态。如果一个数它的所有能整除它的最小状态都只能整除奇数个数，那么就一定有必胜态，否则便是必败态。