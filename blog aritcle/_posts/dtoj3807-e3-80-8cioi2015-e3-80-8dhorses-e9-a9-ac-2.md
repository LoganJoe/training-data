---
title: " DTOJ3807「IOI2015」horses马\t\t"
tags:
  - 线段树
url: 6773.html
id: 6773
categories:
  - Solution
date: 2019-03-03 14:55:08
---

可以想到的一个类似于PKUWC2018D1T2策略是，我们只会在某一年一次性卖出所有的马。在之前卖马一定不优。那么其收益就是$y\_i\\sum\_{j=1}^{i}x_i$。 考虑计算在哪个地方取到最大值。直接计算成绩肯定不可能。我们分别维护模意义下的乘积和在对于每个数取对数意义下的乘积。那么后者就是化乘为加，用浮点数直接维护。 那么现在我们就是维护前缀和乘上某个数的最大值。用线段树每次动态维护修改查询，在pushup的时候计算最大值即可。