---
title: " DTOJ2503ZCC loves meat\t\t"
tags:
  - dp
  - 思路
url: 5154.html
id: 5154
categories:
  - Solution
date: 2018-11-16 16:42:57
---

可以想到，分肉条的方式就是尽量使得一段的狗分到相同的肉条，然后对于每只狗分到肉条画出图形，就是类似于阶梯状的形状。 这样就可以设计dp。每次就枚举当前位置，到之前哪一个位置之间的肉条数量相同，当前区间放多少肉条。于是就有$f\[i\]\[j\]$表示前$i$只狗，用了$j$根肉条，所得到的最小代价。这样做dp是$O(nm^2)$的。 但是这题其实不用这样处理。我们每次只要枚举这个地方增加的高度$\\Delta$。相当于枚举肉条数量的差分。 改变dp状态。$f\[i\]\[j\]$为当前做到第$i$个位置，当前用了$j$根肉条，产生代价的最小值。于是每次枚举$i,j$，下一个转移到的位置$k$，在$\[i,k-1\]$之间的肉条数量相同，$\[k,n\]$中肉条数量至少比$i$多$1$。于是就有$f\[k\]\[j + n - k + 1\] = \\min (f\[k\]\[j + n - k + 1\], f\[i\]\[j\] + (sum\[k - 1\] - sum\[i - 1\]) \\times(n - k + 1))$。表示的是在$\[k,n\]$中的会对于$\[i,k\]$的产生代价。这个转移是$O(n^2m)$的。 然后考虑方案数怎么输出。那么直接向前找当前$dp$值是从哪转移过来的然后对着路径递归下去，就可以把差分值记出来。对着差分值前缀和就可以得到每个位置肉条的数目了。