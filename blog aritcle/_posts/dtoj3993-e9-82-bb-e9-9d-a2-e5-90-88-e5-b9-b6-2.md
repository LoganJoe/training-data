---
title: " DTOJ3993邻面合并\t\t"
tags:
  - 状压dp
url: 5179.html
id: 5179
categories:
  - DTOJ
  - Solution
date: 2018-11-17 21:45:53
---

发现$M\\leq 8$。 想怎么状压怎么状压随便写写转移就好了。 这里讲一下我的做法。 我们用最小表示法表示出一行的状态。具体地，某个位置不为$0$，这个位置的数就是这个位置所属的长方形的标号。容易发现相同数字都是连续的一段，中间可能会有$0$隔开。 我们爆搜出所有的状态。发现在$M=8$时也只有不到$1600$种，因此我们可以给每种状态一个标号，然后开始dp。 记$f\[i\]\[j\]$为覆盖完$i$行，第$i$行的覆盖状态为第$j$种的最小代价。 我们枚举第$i+1$行的覆盖状态$k$转移，即 $$f\[i\]\[j\]+cost(j,k)\\Rightarrow f\[i+1\]\[k\]$$ 注意在转移中要保证第$i+1$行是合法的，即$1$的格子都被覆盖到了，$0$的格子都没有被覆盖到。 $cost(j,k)$即从覆盖状态为$j$变到覆盖状态为$k$的代价。如果$j$中连续且极长的一段相同数字对应到$k$中也是连续且极长的一段相同数字，那么这一段就不用新放一个长方形。这样我们就可以计算出由$j$到$k$需要新放的长方形数量。 最后对于最后一行所有合法的状态$i$的$f\[n\]\[i\]$的最小值就是答案。 Orz神仙lhy和神仙Jyc用01表示状态。Orz神仙slz插头dp。 还是我的写法暴力易懂好想