---
title: " DTOJ2183聪聪与可可\t\t"
tags:
  - 概率dp
url: 633.html
id: 633
categories:
  - Solution
date: 2018-02-17 11:34:28
---

首先我们用spfa，求出聪聪从节点$u$出发到$v$节点所要走到的下一个节点记为$p\[u\]\[v\]$ 然后我们使用dfs，$dfs(u,v)$求出聪聪在$u$节点，可可在$v$节点，所可以获得的步数期望记为$f\[u\]\[v\]$。很明显，$f\[u\]\[v\]$可以由$\\sum {f\[p\[p\[u\]\[v\]\]\[v\]\]\[v'\]}$转移得到。如果可可在$p\[u\]\[v\]$或者$p\[p\[u\]\[v\]\]\[v\]$,那么在$f\[u\]\[v\]$抓到可可的期望就是1.其中$v'$是所有与$v$连边的节点，代表可可可以同概率的到达这些节点。$f\[C\]\[M\]$即为答案。