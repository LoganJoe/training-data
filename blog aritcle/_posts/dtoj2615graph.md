---
title: " DTOJ2615graph\t\t"
tags:
  - 思路
url: 819.html
id: 819
categories:
  - DTOJ
  - Solution
  - 不会证
date: 2018-02-28 08:09:58
---

题解说可以一眼看出来gcd。然而我想了很久还是没有想到。 我们可以对$2S\_i\\leqslant n$的$S\_i$取gcd，这样保证了每块gcd大小的点都与其他点有连边，也就是分成了gcd个联通块。 那为什么是gcd呢…其实我也不是很清楚（雾）。 大概就是如果有两个满足的$S\_i$互质，联通块个数就变成$1$了。如果不互质，把$n$按$\\%gcd$的结果分类，每一类都只剩下一个联通块了。 或者说一个点$x$会与形如$x\\pm S\_i$的点有连边，所以就是gcd。 记gcd为$G$。 对于剩下的$S\_i$，若$G+S\_i\\leqslant n$，则仍然可以取gcd。因为这个$S\_i$也使大小为$G$的联通块中的点都与其他点有连边。 那么对于剩下的$G+S\_i>n$和$2S_i>n$边，分两种情况讨论。

1.  $G=0$，即之前没有满足的$S\_i$。发现中间一定会有一块点与其他点都没有连边，个数为$2min(S\_i)-n$。然后两边的点是对称的，各有$n-S\_i$个。将每个$S\_i$变为$S\_i-min(S\_i)$，我们就得到了一个大小为$n-S_i$的新图，与原图等价。
2.  $G>0$。将$n$变成$n\\%G+G$，即把多余的一块一块大小为$G$的点压起来，因为每块都和其他块有连边。若$S\_i$在最后$n\\%G$那一小块里，将$S\_i$变成$S\_i\\%G+G$，这样在新图中$S\_i$仍然在最后的一小块中；否则将$S\_i$变成$S\_i\\%G$。这样的新图也与原图等价。

递归解决即可。