---
title: " DTOJ2449文明距离\t\t"
tags:
  - 无标签
url: 2869.html
id: 2869
categories:
  - Solution
date: 2018-07-20 17:11:38
---

我们要考虑对于之前一段区间，位置落在在哪一段对于之前答案的贡献相同。 对于这个东西，我称之为等效区间，即上一次落在这段区间内都可以取得最优解。我们记这个区间为$\[L,R\]$，现在我们需要考虑从哪个点取对于当前区间$\[l,r\]$最优。 我们考虑两段区间的情况：

*   $l \\leq L \\leq R \\leq r$，此时不会有任何变动，新等效区间仍为$\[L,R\]$，移动距离0。
*   $l \\leq L \\leq r \\leq R$，此时新等效区间为$\[L,r\]$，移动距离0。
*   $L \\leq l \\leq R \\leq r$，此时新等效区间为$\[l,R\]$，移动距离0。
*   $L \\leq l \\leq r \\leq R$，上一个位置取在$\[l,r\]$间便不会有移动，等效区间为$\[L,R\]$，移动距离0。
*   $l \\leq r \\leq L \\leq R$，此时我们需要从付出L-r的代价，新等效区间为\[r,L\]。
*   $L \\leq R \\leq l \\leq r$，此时我们需要从付出l-R的代价，新等效区间为\[R,l\]。

然后我们发现不用这样大力分讨...归纳一下所有情况我们就可以写出很简洁的代码：

    L=std::max(L,l),R=std::min(R,r);
    if(L>R) std::swap(L,R),ans+=R-L;

O(n)。