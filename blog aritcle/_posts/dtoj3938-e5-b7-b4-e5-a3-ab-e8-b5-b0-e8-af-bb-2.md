---
title: " DTOJ3938巴士走读\t\t"
tags:
  - 最短路
url: 4243.html
id: 4243
categories:
  - DTOJ
  - Solution
date: 2018-10-19 16:54:44
---

我们可以倒着跑最短路（最长路），即从$n$号点跑到$1$号点，就可以知道最晚几点到达$1$号点。 但是每个询问都跑一遍最短路的话，肯定就TLE了。 我们发现，经过边$u\\rightarrow v$到$v$的时间和到$u$的时间并没有关系，只和这条边有关。 也就是说，无论何时从$n$号点出发，经过相同的边更新的$dist$值都是一样的。 那么我们把询问按时间从小到大排序，然后还是每个询问跑最短路，注意不用每次跑最短路都初始化，只要刚开始初始化一次即可。 不同的是，如果之前跑最短路的时候已经用这条边去更新了，那么这次跑最短路就可以当它已经被删除了，因为再次经过这条边也不能更新最短路。 那么这样对于同一个点，每次询问拿去更新的边的到达时间肯定是从小到大的。 那么我们可以用vector存下每个点的邻边，然后按边的到达时间从小到大排序，同时用个指针记从这个点出发的边已经拿去更新的边的位置。 那么这样跑完$Q$次最短路，每条边都只会被遍历一次。 时间复杂度$\\Theta(m)$。