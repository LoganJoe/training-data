---
title: " DTOJ2301寻宝游戏\t\t"
tags:
  - 虚树
url: 3596.html
id: 3596
categories:
  - DTOJ
  - Solution
date: 2018-08-26 14:42:24
---

相当于每次求把所有有宝物的点连起来的最小边长的两倍。 而最优的方案就是所有有宝物的点建出的虚树。即这些点按dfs序排序，相邻的点的$LCA$和这些点组成的树。 知道了这个后，我们发现，答案就是这些点按dfs序排序后，相邻两点的距离再加上第一个点到最后一个点的距离。 那么我们可以用set按照dfs序维护有宝物的点。 每次加入/删除一个点时，我们找到这个点的前驱和后继，计算一下对答案的影响即可。 Jyc又用暴力分讨+线段树过掉了此题%%%