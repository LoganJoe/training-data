---
title: " DTOJ1110书架\t\t"
tags:
  - dp
  - 单调队列
  - 线段树
url: 1695.html
id: 1695
categories:
  - DTOJ
  - Solution
date: 2018-04-24 20:15:18
---

记$f\[i\]$为放前$i$本书需要的最小总高度。通过枚举上一层的最后一本书$j$，我们有 $$f\[i\]=min\\{f\[j\]+max(h\[j+1\\sim i\])\\}(\\sum_{k=j+1}^{i}w\[k\]\\leqslant L)$$ 可以转移的$j$在一段范围内，这段范围可以二分找出。 转移是一个区间询问最小值的问题，考虑用线段树维护$f\[j\]+max(h\[j+1\\sim i\])$。 $max(h\[j+1\\sim i\])$显然是关于$j$单调不升的，很容易想到用单调队列维护。 当单调队列里的元素发现改变时，说明有某段$j$的$max(h\[j+1\\sim i\])$发生了改变，在线段树上区间加减即可。 同样地，也可以用单调队列+set维护。