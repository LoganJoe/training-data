---
title: " DTOJ3955Bajtocja\t\t"
tags:
  - hash
  - 并查集
url: 4490.html
id: 4490
categories:
  - DTOJ
  - Solution
date: 2018-10-24 15:40:25
---

两个点在某张图中是否连通，可以通过它们所属的连通块的编号来判断。 那么两个点在$d$张图中是否都连通，也可以通过它们所属的连通块的编号来判断。 考虑用并查集维护每个点在$d$张图中所属的连通块编号，那么如果两个点在$d$张图所属的连通块编号都相同，它们就在$d$张图中都连通。 我们可以把每个点在$d$张图中所属的连通块编号hash起来，那么问题就变成了动态加边，询问有多少点对的hash值相同。 我们可以维护每个连通块的点集，在并查集合并的同时修改点集里点的hash值，即将连通块里的点抓出来更新它们的hash值。 为了防止复杂度爆炸，我们要启发式合并，每次将小的连通块合并到大的连通块里，修改也是修改小连通块里的点的hash值。 再写一个hash表维护每种hash值的出现次数即可。用map也许会TLE。