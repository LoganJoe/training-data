---
title: " DTOJ2487卖画\t\t"
tags:
  - dp
  - 线段树
url: 2359.html
id: 2359
categories:
  - Solution
date: 2018-06-12 19:41:49
---

总的方案数，很显然是$\\sum a\_i+b\_i$。我们可以计算不合法的方案数。即为买画的人小于C的总方案数。 对于一般的问题，我们很容易写出这个多重背包的转移式。考虑如何让这个支持修改。 注意到，c特别小。于是我们用线段树处理。每个节点有一个数组$f_i$，表示当前区间$\[l,r\]$中，有i个人买画的总方案数。那么每次pushup的时候就是左边合并到右边的操作。 然后就是要支持单点修改和区间查询。时间复杂度$O(nC^2log n)$。