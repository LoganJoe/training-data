---
title: " DTOJ2347国旗计划\t\t"
tags:
  - dp
  - 思路
url: 3704.html
id: 3704
categories:
  - Solution
date: 2018-08-28 12:25:14
---

普通想法很好想，一个$n^2$的dp就好了。

然后考虑怎么优化。离散化所有端点。对于每个点，我们可以预处理出可以到达的最远的端点，然后我们发现转移一定是转移到最远的那个点最优，因为题目保证了不会相含。

这是一个树的结构。我们让每个战士分别作为起点，对于每个起点，我们在转移路径上暴力跳链，就可以求出每个战士的答案了。效率过不去，那么暴力跳链的时候压缩路径就好了。因为转移到的位置明显是单调的。