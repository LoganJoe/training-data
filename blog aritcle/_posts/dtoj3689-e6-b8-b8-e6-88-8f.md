---
title: " DTOJ3689游戏\t\t"
tags:
  - 思路
  - 拓扑序
url: 1845.html
id: 1845
categories:
  - DTOJ
  - Solution
date: 2018-04-30 21:10:53
---

显然没有锁的门是没有用的，我们先把这些点压起来。 如果$x$往$x+1$的门的钥匙在门左边，那么从$x+1$的右边开始是走不到$x$的。那么我们从$x+1$往$x$连一条边，代表我们要先求出从$x+1$开始能走到的区间，再求从$x$开始能走到的区间。因为如果$x$能走到$x+1$，那么我们就可以将$x+1$的答案并到$x$的答案中，因此要先求出$x+1$的答案。如果钥匙在门右边同理。 这样我们就得到了一个DAG，我们按照拓扑序依次求每个点的答案。 对于当前点，初始答案为自己，然后看能否向两边走。如果能走就将两侧的答案并进来。 由于每个区间最多会被并两次（左边和右边），所以时间复杂度是$\\Theta(n)$的。