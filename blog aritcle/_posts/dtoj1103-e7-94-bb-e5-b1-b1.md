---
title: " DTOJ1103画山\t\t"
tags:
  - dp
url: 4829.html
id: 4829
categories:
  - Solution
date: 2018-10-30 23:06:17
---

既然不能有三点共线，我们就需要把斜率相同的线段放在一起做。将斜率离散掉。 设$f\[i\]\[j\]\[k\]$为当前点为$(x,y)$,上一条线斜率为$k$时的方案数。 那么可以写出一个十分明显的转移，就是$f\[x\]\[y\]\[k'\] \\Rightarrow f\[i\]\[j\]\[k\],\\frac{y-j}{x-i}=k,k \\neq k'$。 那么考虑优化转移，就是$sum\[i\]\[j\]=\\sum_{i=1}^{total_k}f\[i\]\[j\]\[k\]$，那么有$f\[i\]\[j\]\[k\]=sum\[x\]\[y\]-f\[x\]\[y\]\[k\]$。 然后每次枚举$i,j,k$，在根据枚举的斜率再枚举一个$\\Delta x$，假设存在这样斜率为$k$，投影为$x$的线段就可以转移。