---
title: " DTOJ3878走路\t\t"
tags:
  - dp
url: 3806.html
id: 3806
categories:
  - Solution
date: 2018-09-03 18:07:37
---

最优的决策一定是先走一段到一个餐馆然后开始往回吃。$f\[i\]\[j\]$为不吃$1 \\to i-1$的餐馆，然后一共吃到$j$克食物的最小代价。那么显然的dp转移：

$$f\[i\]\[j\]=\\min\\{f\[i+1\]\[j-a\[i\]\]+a\[i\]*i,f\[i+1\]\[j\]\\}$$

还有一个转移是$f\[i\]\[a\[i\]\]$对$(2+a\[i\])*i$取$min$,表示吃到当前位置就回头。

然后f可以滚动数组。

另外，我们只需要考虑$j\\leq \\frac{m}{i}$，因为假设$ij>m$，代价必然超过m，不需要更新。

于是这个dp的效率就是$O(m \ log \ m +n)$。