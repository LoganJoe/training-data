---
title: " DTOJ4072探险队\t\t"
tags:
  - 思路
  - 最短路
url: 5650.html
id: 5650
categories:
  - Solution
date: 2018-12-18 22:58:28
---

我们设$f\[x\]$为走到$x$点并知道相邻一条边无法通过后，最坏情况下走到$T$最短路长。考虑如何计算。 其中，当删掉最短路以外的边，并不会造成影响。而删去最短路上的边就要开始考虑了。 以$T$为根，建出最短路树。那么$f\[x\]$的关键边就是最短路树上指向父亲的边。 然后我们考虑断开一条树边，非树边对于删掉某条树边以后最短路的增量$\\Delta$。 记每个点到达$T$的最短路为$dis\[x\]$。那么对于一条边$(u,v,w)$，其会对点$x \\in (u \\to v)$的$f\[x\]$产生$dist\[u\]+dist\[v\]+w-dist\[x\]$的贡献。 一种思路是用树链剖分维护。但是这样会被卡常。考虑用类似kruscal的离线方式操作。而每次更新的部分一定是最小的，在树上暴力跳链以后将这些边压在一起，后面就不再更新了。 接下来我们再考虑答案如何计算：记$g\[x\]$为$x$点开始走到$T$的答案。那么会有转移$g\[u\]=\\max(f\[u\],\\max{g\[v\]+w})$。 注意到这是类似于最短路网更新的形式。那么我们可以用求最短路的方法求出这个。