---
title: " JZOJ6003Square\t\t"
tags:
  - 思路
url: 6095.html
id: 6095
categories:
  - Solution
  - 不会证
  - 其他OJ
date: 2019-01-18 22:38:20
---

根据部分分的提示，我们先考虑如何判无解。 我们发现，最后操作的那行/列，一定是同一种颜色的。 我们可以把这行/列找出来删掉，然后继续找最后操作的行/列，直到找不出来或者全部删完。 如果同时存在多个可能是最后操作的行/列，我们任意选择一个删掉并不会影响到解的存在性。 现在我们考虑求最小的操作次数。 首先要明白一点，一定有$\\min(N,M)\\leq ans\\leq N+M$。 上界很显然，下界的意思就是要么每行都被操作过，要么每列都被操作过。因为如果有一行和一列没有被操作，那么这行这列对应的格子一定就是白色的。 我们转换一下思路，因为染$N+M$次一定可行，那么我们考虑最多能少染几次。 由于行列总有一个是操作满的，我们不妨分类讨论。

*   每行都被染过。那么如果有两列相同的，就可以少染一次。
*   每列都被染过。那么如果有两行相同的，就可以少染一次。

那么我们求出所有行/列中相同的最多有几个，就可以求出答案了。具体实现可以用hash或者Trie树。 至于这样为什么是对的，我也不是很清楚。 这种做法完全不用考虑操作顺序，也就是说一定能构出合法的操作顺序和方案画出，但是我显然不会证明。