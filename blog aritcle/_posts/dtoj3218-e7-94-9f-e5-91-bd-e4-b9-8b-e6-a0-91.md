---
title: " DTOJ3218生命之树\t\t"
tags:
  - 思路
  - 树形dp
url: 5614.html
id: 5614
categories:
  - DTOJ
  - Solution
date: 2018-12-17 07:53:29
---

我最讨厌这种怪树形dp了。 记$f\[i\]\[j\]$为复原完以$i$为根的子树，还能复原和$i$的距离$\\leq j$的节点的最小代价。$g\[i\]\[j\]$为以$i$为根的子树，和$i$的距离$\\leq j$的节点还没有复原，剩余节点都复原了的最小代价。 考虑转移。对于$i$的某个儿子$son$，有 $$f\[i\]\[j\]=\\min(f'\[i\]\[j\]+g\[son\]\[j-1\],f\[son\]\[j+1\]+g'\[i\]\[j\])$$ $$g\[i\]\[j\]=g'\[i\]\[j\]+g\[son\]\[j-1\]$$ 特殊地，有$f\[i\]\[0\]=\\min(f'\[i\]\[0\]+f\[son\]\[0\],f\[son\]\[1\]+g'\[x\]\[0\]),g\[i\]\[0\]=g'\[i\]\[0\]+f\[son\]\[0\]$。 其中，$f'\[i\]\[j\],g'\[i\]\[j\]$为未考虑以$son$为根的子树的dp值，$f\[i\]\[j\],g\[i\]\[j\]$为考虑了以$son$为根的子树的dp值。 同时还有 $$f\[i\]\[j\]=\\min(f\[i\]\[j\],f\[i\]\[j+1\])$$ $$g\[i\]\[j\]=\\min(g\[i\]\[j\],g\[i\]\[j-1\])$$ 特殊地，$g\[i\]\[0\]=\\min(g\[i\]\[0\],f\[i\]\[0\])$。 最终答案就是$f\[1\]\[0\]$。