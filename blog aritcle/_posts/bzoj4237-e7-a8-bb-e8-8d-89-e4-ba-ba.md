---
title: " BZOJ4237稻草人\t\t"
tags:
  - 分治
url: 272.html
id: 272
categories:
  - BZOJ
  - Solution
date: 2018-01-17 20:20:32
---

先按$x$排序，对$y$进行分治，分别上下两个平面。 考虑以上平面的点作为右上角，有几个下平面的点能作为左下角。 对于右上角的点$(x,y)$，仅考虑上平面的话，左边最远能到的地方一定是$(x,y)$往左第一个$y$比它小的点的$x$，我们用一个$y$单调增的栈维护。 再考虑下平面，只有$x$增大且$y$单调减的点才能保证矩形中没有其他点。同时由于上平面有限制$x$最左能到的地方，所以下平面单调栈中的点只要满足$x$的限制就能成为左下角。 把每次能作为左下角的点数加起来就是答案。