---
title: " DTOJ2979String problem\t\t"
tags:
  - 最大权闭合子图
  - 最大流
url: 5748.html
id: 5748
categories:
  - Solution
date: 2018-12-23 15:05:37
---

最大权闭合图...嘻嘻嘻... 建出三类点表示代价。

*   对于序列，每两点之间建出一个点，代价是$w\[i\]\[j\]+w\[j\]\[i\]$，表示同时选了$i$和$j$点的收益。
*   对于序列中每个点各建出一个点，表示每选择一个数字的基础花费$-a\[s\[i\]\]$。
*   对于0-9各建出一个点，表示选了第一个该数字后的花费-(b\[i\]-a\[i\])$。

很容易发现这是一个最大权闭合子图问题。可以跑最小割解决。 我已经有点忘了最大权闭合图怎么去建了

> 对于点权为正的节点，从源点连一条容量为点权的边到该点，对于点权为负的边，从该点连一条容量为点权绝对值的边到汇点。原图中的边保留，容量为inf。最大权值即为图中所有正点权之和减去最大流。