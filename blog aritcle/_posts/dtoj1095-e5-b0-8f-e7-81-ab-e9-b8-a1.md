---
title: " DTOJ1095小火鸡\t\t"
tags:
  - 区间dp
  - 奇技淫巧
url: 1766.html
id: 1766
categories:
  - DTOJ
  - Solution
date: 2018-04-27 15:16:57
---

一类特殊的区间dp，当前决策会影响之后的贡献。 发现消除一段区间后，分成的两个区间，只有头尾颜色相同时才会对之后有影响。 那么记$f\[l\]\[r\]\[k\]$表示区间$\[l,r\]$后面还有$k$个和第$r$位相同的字符被吃完的最小次数。注意到当$k\\geqslant 3$时和$k=3$是等价的，因此我们可以认为$k\\leqslant 3$。 考虑转移。我们显然可以把尾巴吃掉（如果能吃的话），也就是 $$f\[l\]\[r-1\]\[0\]+1\\rightarrow f\[l\]\[r\]\[k\]$$ 第二种转移比较神奇。找到和第$r$位相同的一个位置$i$，然后吃掉$\[i+1,r-1\]$，把剩下的两段拼一起。即 $$f\[l\]\[i\]\[min(k+1,3)\]+f\[i+1\]\[r-1\]\[0\]\\rightarrow f\[l\]\[r\]\[k\]$$ 因为如果这次吃掉的区间右端点不是$r-1$的话，会在其他的区间被考虑到。 用记忆化搜索写起来会比较方便。