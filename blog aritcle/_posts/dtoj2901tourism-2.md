---
title: " DTOJ2901tourism\t\t"
tags:
  - 奇技淫巧
  - 树形dp
url: 4140.html
id: 4140
categories:
  - DTOJ
  - Solution
date: 2018-10-16 12:58:31
---

注意到任意两点间不存在节点数超过$10$的简单路径。 这个优秀的性质保证了我们的dfs树的深度$\\leq 10$。 假如是一棵树的话，我们可以很容易地用树形dp求出答案。 是一张图的话，我们考虑在dfs树上dp。由于深度小，考虑把根到当前的点之间经过的所有点的状态状压起来。 状态分为三种：$0$：没有被覆盖过，$1$：建站点，$2$：没建站点但被覆盖了。 在dp的时候，我们先处理该点及该点祖先对这个点的影响，然后再去求儿子的dp值，最后再用儿子的dp值来更新该点dp值。 一般树形dp的状态都是$f\[x\]\[S\]$，但是这题这样开的话空间不够。我们发现dp的状态只和当前点到根的路径有关，因此可以把第一维改成当前点的深度。 这样空间就开的下了。 （超神奇的树形dp