---
title: " DTOJ1268超级钢琴\t\t"
tags:
  - ST表
  - 思路
url: 1023.html
id: 1023
categories:
  - DTOJ
  - Solution
date: 2018-03-12 07:35:09
---

记三元组$(x,l,r)$表示选的区间左端点在$x$，右端点在$\[l,r\]$中能得到的最大值。显然我们每次可以贪心地选最大的三元组。 选了一段区间后，这段区间就不能再选。但他连续的子序列仍然可以选。记选的三元组的右端点在$y$处取得最大值，这个三元组能分裂成$(x,l,y-1)$和$(x,y+1,r)$两个三元组继续选。 因此拿堆维护当前可以选的三元组。快速求出最大值可以用st表预处理前缀和的最大值。