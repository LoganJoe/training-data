---
title: " DTOJ3963取石子\t\t"
tags:
  - 博弈
url: 4638.html
id: 4638
categories:
  - DTOJ
  - Solution
date: 2018-10-28 10:49:52
---

我们打个暴力，找找规律。 我们发现必败态很少，把必败态打出来找找规律。 然而我就找到了$x,y,z$有一个为$0$的规律…… 但如果你暴力写得优美一点的话，你写完跑一跑就发现过了。 优美的暴力指的就是，从每个必败态出发，把必胜态筛掉。能到达必败态的一定是必胜态，因此我们从必败态往回走一步就可以筛出必胜态。 必败态我打出来后好像只有$14000$多个，然后每次筛一下是$\\Theta(300)$的。 我证明一下必败态$\\leq 45150$吧。 不妨设用$(x,y,z)$表示一种局面，其中$x\\leq y\\leq z$。 对于同样的$x,y$，至多只可能有一个$z$满足$(x,y,z)$是必败态。 考虑用反证法。 如果存在$a>z$，且$(x,y,a)$是必败态，那么我们把$a$取到$z$，就到达$(x,y,z)$这个必败态。但是能到达必败态的一定是必胜态，矛盾。 如果存在$a<z$，且$(x,y,a)$是必败态，那么我们把$z$取到$a$，就到达$(x,y,a)$这个必败态。同样地，能到达必败态的一定是必胜态，矛盾。 因此必败态$\\leq 45150$。 对于某些$x,y$不存在$z$满足$(x,y,z)$是必败态。因为之前我们只考虑取最后一堆的情况，我们还剩下六种取法没有考虑。考虑之后能进一步缩小必败态的范围。 但是没必要了，因为$45150\\times 300=13545000$，已经足以通过此题。 这题出题人的题解不知道在写什么。