---
title: " DTOJ3425最近公共祖先\t\t"
tags:
  - 线段树
url: 3680.html
id: 3680
categories:
  - Solution
date: 2018-08-27 23:11:24
---

不少人一开场码个树剖以示敬意。

但是想一下，对于一个点，变成黑点会对那些点产生影响。

既然是最近公共祖先，产生影响的点一定会在子树下，作为lca贡献。然后到根的路径上的某些点，会由于这个黑点的存在而取的到lca的权值。那么我们先改子树的最大值，然后对于当前点到第一个黑点的路径上，其其他子树都会被lca的权值贡献。那么暴力跳链修改就好了。