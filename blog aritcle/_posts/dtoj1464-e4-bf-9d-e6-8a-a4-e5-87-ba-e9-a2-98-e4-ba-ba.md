---
title: " DTOJ1464保护出题人\t\t"
tags:
  - 三分
  - 斜率dp
url: 1207.html
id: 1207
categories:
  - DTOJ
  - Solution
date: 2018-03-22 21:52:00
---

记$Sum\_i=\\sum\_{j=1}^{i}a\_i$。 第$i$关需要的最小攻击力是 $$max\\{\\frac{Sum\_i-Sum_{j-1}}{x\_i+(i-j)d},j\\leqslant i\\}$$ 也就是说对于第$i$关，打死从末尾往前数的第$j$只僵尸，至少需要$Sum\_i-Sum_{j-1}$点伤害，并且要在$x\_i+(i-j)d$的时间内打死。 这样子是$n^2$的。考虑化简一下式子 $$max\\{\\frac{Sum\_i-Sum_{j-1}}{x\_i+id-jd},j\\leqslant i\\}$$ 是不是有一点像…斜率？ 可以看作经过$(x\_i+id,Sum\_i)$和$(jd,Sum\_{j-1})$的直线的斜率。 那么对于第$i$关，就是要在之前的所有$(jd,Sum_{j-1})$中，找一个与$(x\_i+id,Sum\_i)$构成的直线斜率最大的点。$jd$和$Sum_{j-1}$都是单调递增的，所以要找的$j$一定在下凸壳上最优。 发现选凸壳两侧的点斜率较小，越往中间斜率越大，是一个凸函数，可以三分。 那么我们维护下凸壳，然后在下凸壳上三分找最大值即可。