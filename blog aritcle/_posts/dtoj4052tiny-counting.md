---
title: " DTOJ4052Tiny Counting\t\t"
tags:
  - 无标签
url: 5321.html
id: 5321
categories:
  - DTOJ
  - Solution
date: 2018-11-28 15:57:02
---

我们先不考虑$a,b,c,d$互不相等的限制。 那么答案就是正序对个数乘上逆序对个数。 再考虑扣掉$a,b,c,d$有相等的情况。 由于我们已经保证了$a<b,c<d$，所有只有可能$a=c,a=d,b=c,b=d$这四种。 我们分别讨论一下每种情况的数量。

*   $a=c$。$a$后面比$S\_a$小的数的数量乘上后面比$S\_a$大的数的数量。
*   $a=d$。$a$前面比$S\_a$大的数的数量乘上后面比$S\_a$大的数的数量。
*   $b=c$。$b$前面比$S\_b$小的数的数量乘上后面比$S\_b$小的数的数量。
*   $b=d$。$b$前面比$S\_b$小的数的数量乘上前面比$S\_b$大的数的数量。

四种情况的数量都扣掉即可。 注意$S_i$可能会相同。