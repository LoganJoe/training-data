---
title: " DTOJ3925天哥种树\t\t"
tags:
  - 思路
url: 4070.html
id: 4070
categories:
  - DTOJ
  - Solution
date: 2018-10-03 14:09:38
---

特殊的点一共就$20$个，我们可以维护这$20$个点的位置。 这样询问的时候我们就能找出有哪些特殊的点在$x$到$y$的路径上，可以用树上距离或者dfs序来判断一个点是否在一条路径上。 我们把从$x$到$y$依次经过的特殊点记住$a\_1,a\_2,a\_3,…,a\_{cnt}$。 那么$x$到$y$的某个子路径权值的异或和一定是$a$一段子区间的异或和。 那么我们只要找到$a$中异或和为$k$的子区间即可。 记区间为$\[l,r\]$。那么路径左端点在$a_{l-1}$到$a\_l$之间的点取，右端点在$a\_r$到$a_{r+1}$之间的点取即可。 注意$l=1$和$r=cnt$的情况。 以及$k=0$的情况要特判（不然就爆零了。