---
title: " BZOJ1566[NOI2009]管道取珠\t\t"
tags:
  - dp
  - 思路
url: 2556.html
id: 2556
categories:
  - BZOJ
  - Solution
date: 2018-06-17 22:57:33
---

考虑$a\_i^2$有什么意义。 对于第$i$种状态，有$a\_i$种方法达到。我选一种，你选一种，方案就是$a_i^2$。 那么，问题就变成了，有两个人在玩这个游戏，他们的最终状态一样的方案数。 这个dp就比较好想了。 记$f\[i\]\[j\]\[k\]\[l\]$为第一个人在上面取了$i$个球，在下面取了$j$个球，第二个人在上面取了$k$个球，在下面取了$l$个球，得到的状态一样的方案数。 那么枚举这次两个人分别从哪里取球即可转移。 但这样是$\\Theta(n^4)$的，不够优秀。 我们发现，只有$i+j=k+l$的状态$f\[i\]\[j\]\[k\]\[l\]$是有意义的。那么我们可以把最后一维弄掉。 这样就是$\\Theta(n^3)$的了。 但是空间还是开不下，把第一维滚动掉即可。