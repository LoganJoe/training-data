---
title: " DTOJ3497河流\t\t"
tags:
  - 思路
url: 2693.html
id: 2693
categories:
  - DTOJ
  - Solution
date: 2018-07-04 21:28:20
---

发现$n$很大，而$m$很小。手模几下可以发现决策肯定有循环，循环节最多只有$m$步。 那么可以找出最小循环节就解决了问题。 那么现在的问题是，从当前时间$x$，如何找到下一步探险的时间$y$。 显然$y-x<m$。记$a=x\\%m,b=y\\%m$。我们可以分情况讨论。

*   $a\\leqslant b$，代价是$-a+b+A\[b\]$
*   $a>b$，代价是$m-a+b+A\[b\]$。

那么我们只要维护前缀$i+A\[i\]$的最小值和后缀$i+A\[i\]$的最小值。就可以$\\Theta(1)$找出下一步探险的时间了。 显然在$m$步内会找到同一个$b$两次，此时就找到了代价最小的循环节。 那么绕循环节的代价可以直接算，再暴力跳一下循环节把剩下的步数走了即可。