---
title: " DTOJ3991雪人\t\t"
tags:
  - hash
  - 二分
url: 4532.html
id: 4532
categories:
  - Solution
date: 2018-10-25 14:07:07
---

*   背景：
    ---
    

凛冬已至，静谧的雾之湖上大雪纷飞，妖精们与飞雪融为一体后因风而起......然而这都是琪露诺的一个不为人知的阴谋——  

*   题意：
    ---
    

$n$只无辜的妖精被充满智慧与力量的琪露诺冻成了雪人，每个雪人分别有一个$P$值$p\[i\]$。为了对付邪恶的博丽城管，琪露诺要挑出两串雪人$A\[l\_a,r\_a\]$、$B\[l\_b,r\_b\]$，满足： -    ①.        $|A|=|B|$； -    ②.        $A\[1\]-B\[1\]=A\[2\]-B\[2\]=A\[3\]-B\[3\] \\dots =A\[i\]-B\[i\]$； -    ⑨.        另外，$A$、$B$两个雪人串可以有重复部分。   为了成功骗到这位贪婪、无节操的城管，琪露诺还希望挑选的雪人串的min{|A|,|l\_a-l\_b|}最大，于是你又又又又被抓来解决问题了。  

*   题解：
    ---
    

对于条件②，不难发现其等价于： \-        $A\[1\]-A\[2\]=B\[1\]-B\[2\],A\[2\]-A\[3\]=B\[2\]-B\[3\] \\dots A\[i\]-A\[i+1\]=B\[i\]-B\[i+1\]；$ 如此，就可以对$p\[\]$做一次差分后$Hash$起来，就可以$\\Theta (1)$地判断两个子串满足条件了（注意要退一位再比较哈希值）。   -        然后，不妨二分答案$x$（$min(|A|,|l\_a-l\_b|)$）。从$1 \\sim n$，对于每个$(i,i+x-1)$的区间，存下其哈希值最早出现过的位置$j$，如果$i-j>=x$，则说明$x$是一个可行的答案。 -        对于储存哈希值，我们用哈希表来实现（$map$可能会被卡成⑨），效率优秀。