---
title: " DTOJ3566Mousetrap\t\t"
tags:
  - 二分
  - 思路
  - 树形dp
url: 2273.html
id: 2273
categories:
  - DTOJ
  - Solution
date: 2018-06-08 15:40:25
---

记老鼠从$S$出发，我们要让它走到$T$。 我们可以把$T$当做树的根。那么老鼠肯定会往某个子树走，我们可以等它不能动了后，把它到根的支路全部堵住。 记$f\[i\]$为老鼠从$i$往$i$的子树中走，然后我们让它走到根的最小代价。 那么有 $$f\[i\]=secmax_{son}\\{f\[son\]\\}+1$$ 其中，$secmax$为次大值。取最大值的原因是我们可以堵住往最大值的路，$+1$是因为我们还要把老鼠引回来。注意堵路的代价在$f\[son\]$被考虑到了（因为$f\[son\]$考虑了堵掉$son$到根的所有支路）。只有一个儿子或没有儿子的情况要特殊考虑。 然后考虑二分答案$mid$。对于$S$到根的路上，所有会使答案超过$mid$的路我们都要堵掉。注意要判断有没有时间堵。 还要考虑初始老鼠在$S$时我们要堵$S$的子树还是$S$到根的支路。 细节挺多的。