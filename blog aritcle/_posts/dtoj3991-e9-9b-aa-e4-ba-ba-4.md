---
title: " DTOJ3991雪人\t\t"
tags:
  - hash
  - 二分
url: 5125.html
id: 5125
categories:
  - DTOJ
  - Solution
date: 2018-11-13 16:47:27
---

先将第二个条件移个项，即 $$a\_1-a\_2=b\_1-b\_2$$ $$a\_2-a\_3=b\_2-b\_3$$ $$……$$ $$a_{n-1}-a\_n=b\_{n-1}-b_n$$ 那么我们把序列X作个差分，就变成了在差分序列上求最长可重叠的公共子串长度。 显然答案是可以二分的。 我们二分一个答案$mid$，考虑判断是否有长度为$mid$的可重叠的公共子串。 即判断是否存在$1 \\leq i,j\\leq N-mid+1,i\\neq j$，使得区间$\[i,i+mid)$中的数和区间$\[j,j+mid)$中的数相同。 对于每个$i$，我们把区间$\[i,i+mid)$中的数hash起来。 那么就变成了判断是否有两个区间的hash值相同。 hash时把hash值插入到hash表中，就可以期望$\\Theta(1)$判断是否某个hash值是否存在了。 时间复杂度$\\Theta(N\\log N)$。