---
title: " DTOJ2577建筑师\t\t"
tags:
  - 斯特林数
url: 5016.html
id: 5016
categories:
  - Solution
date: 2018-11-02 16:56:21
---

可以想到，左边和右边是互不干涉的。不妨让我们分开考虑。 设$f\[i\]\[j\]$为$i$个建筑物，可以看见$j$个的方案数。那么我们想到，将建筑从高到低插入，除了插在第一个位置，插在其他的位置中都看不到。而插在第一个位置，就可以使得看见的数量$+1$。那么我们注意到，这就是第一类斯特林数的公式： $$s(n,m)=s(n-1,m-1)+s(n-1,m)\\times (n-1)$$ 第一类斯特林数，表示将$n$个不同的元素划分成$k$个不同的环的方案数。 那么答案理应就是 $$ans=\\sum_{i=L}^{n-R+1}f\[i\]\[L\]\\times f\[n-i+1\]\[R\] \\times\\binom{n-1}{i-1}$$ 后面那个组合数，就是$n-1$个中选$i-1$个放在左边。 但是其实这样子是不必要的。我们直接跑出$L+R-1$的方案数，然后把$R$个方案翻转到右边就好了。这个东西的正确性，我们可以回到斯特林数，那么就是将$R-1$个圆排列划分到右边： $$ans=f\[n\]\[L+R-1\]\\times \\binom{L+R-2}{L-1}$$