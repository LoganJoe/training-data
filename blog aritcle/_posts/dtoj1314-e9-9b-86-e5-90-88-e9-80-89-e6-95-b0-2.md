---
title: " DTOJ1314集合选数\t\t"
tags:
  - 状压dp
url: 3462.html
id: 3462
categories:
  - Solution
date: 2018-08-16 22:21:20
---

主要思想是转化问题。

对于原问题，我们可以先在矩阵开头写下一个数x，然后构造出一个系数矩阵：

1 3  9  27…

2 6 18 54…

4 12 36 108…

矩阵的边界是数值小于n。这个矩阵是幂递增的，于是行列数不会很多。

在这个矩阵中的所有数，需要满足相邻的不能选择。于是这个东西我们可以状压dp求方案数，记$f\[i\]\[j\]$为当前处理前$i$行，第$i$行方案为$j$的方案数。

然后每次这个矩阵可以处理掉一些数并且得到这些数互相选的方案数。然后我们可以找到下一个没有处理到的数x并在求一遍方案数。各个矩阵之间独立，乘法原理算出答案。