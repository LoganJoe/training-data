---
title: " DTOJ3651Pathwalks\t\t"
tags:
  - dp
  - 线段树
url: 1540.html
id: 1540
categories:
  - DTOJ
  - Solution
date: 2018-04-17 07:41:00
---

先考虑一个$\\Theta(n^2)$的dp。 令$f\[i\]\[j\]$表示最后在$i$点，最后一条边的长度为$j$，合法路径最长的长度。 按边的顺序进行dp，对于每条边$(u,v,w)$，显然有 $$f\[v\]\[w\]=max_{i=0}^{w-1}\\{f\[u\]\[i\]\\}+1$$ 单独考虑每个点，那么这就是一个单点修改和区间询问最大值的问题。 那么对每个点都开一棵线段树，动态开点即可。