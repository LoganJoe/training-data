---
title: " DTOJ4010秀秀的照片\t\t"
tags:
  - 数学
url: 5288.html
id: 5288
categories:
  - Solution
date: 2018-11-23 13:09:11
---

看错题意毁一生系列。 就是无论从中间哪里切开，左边颜色数和右边颜色数的差都是一个值。 那么我们就可以归纳到切点在$1$和$m-1$的情况。假设左边颜色为$a$，右边颜色为$b$，那么第一列要包含全部$a$种颜色，最后一列要包含全部$b$种颜色，中间的颜色只能是$a$和$b$颜色的交集。 考虑枚举左边出现了$i$种颜色，右边出现了$j$种左边没有的颜色。令$i \\ge j$，左右互换同理。那么答案就是首先在$k$中内选$i+j$个颜色，然后在$i+j$中选$i$个给左边，在$i$个中选$i-j$个左右共有，然后考虑在左边$n$个中每种颜色划分到几个，那么就是可以乘上一个$S(n,i) \\times i!$，就是说将$n$个格子每个格子填上$i$个数中的一组，并且让集合方案有差别的方案数。$S(n,m)$是第二类斯特林数，含义如上。 另外中间的格子是可以任取$i-j$种颜色的。于是答案就是 $$\\sum_{i=1}^{n}\\sum_{j=1}^{i}\\binom{k}{i+j}\\binom{i+j}{i}\\binom{i}{j} \\left\\{ \\begin{matrix}n \\\ i \\end{matrix} \\right\\}^2  (i!)^2   \\times 2^{n\\times (m-2)}$$