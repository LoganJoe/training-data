---
title: " DTOJ3319心理学概论\t\t"
tags:
  - 二分
  - 线段树
url: 3543.html
id: 3543
categories:
  - Solution
date: 2018-08-24 19:46:09
---

首先我们可以将所有的篮子按照$a_i$排序，那么第一只兔子会吃掉一个前缀的篮子使得自己的答案最优。同理，另外一只兔子会吃掉剩下一些篮子的一个前缀。暴力枚举前缀然后计算答案是$O(n^2)$的，并且第一和第二个pos之间显然不满足线性递推关系。

考虑枚举第一个分界点然后找到第二个位置，使得答案最优。

对于剩下的食物，我们按照$b\_i$排序，那么对于一个切点，给到的贡献是最后一个篮子的$b\_i$和后面的${c\_i}\_{max}$。

那么我们需要支持的就是维护$b\_i+\\max\_{j=i+1}^{n}c_j$并查询最小。然后我们可以倒着枚举第一个分界点，然后就可以避免删除操作。

每次加一个点，会对一段中的$\\max_{j=i+1}^{n}c_j$产生影响。因为根据后缀最大值的性质可以知道，这个最大值是从后向前单调不减的。那么贡献的区间我们可以线段树上二分找到，然后直接修改。

这样就可以在线段树上更新答案了。