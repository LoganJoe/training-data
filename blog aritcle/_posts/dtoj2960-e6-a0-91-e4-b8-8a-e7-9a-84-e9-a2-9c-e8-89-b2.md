---
title: " DTOJ2960树上的颜色\t\t"
tags:
  - 莫队
url: 1780.html
id: 1780
categories:
  - Solution
date: 2018-04-29 18:17:54
---

题目很绕。 我们先考虑一个序列上的问题：每次询问一个$\[l,r\]$,求$\[l,r\]$中出现次数$\\geq k$的数字个数。这个问题如果不带修改的话明显可以用莫队解决。 原题要求我们求一棵树的子树中，出现次数$\\geq k$的颜色个数。注意到子树的问题可以转换到$dfs$序上处理，那么这题在没有修改的情况下可以用莫队解决。 我们来推广一个带修改但k固定的问题：每次将一个节点的颜色改为C。 那么我们可以想到，不考虑修改时这个问题也可以用线段树解决：对于$\[l,r\]$，记叶节点为出现次数，非叶节点为出现次数大于$k$的颜色数量。在对于单个询问很好处理。多个询问不带修改我们也可以使用线段树合并来得到答案。那么对于修改，（或许）可以使用$CDQ$分治，处理修改对于后面答案的影响。没写过。（貌似这样还可以使得询问中的k变化？）