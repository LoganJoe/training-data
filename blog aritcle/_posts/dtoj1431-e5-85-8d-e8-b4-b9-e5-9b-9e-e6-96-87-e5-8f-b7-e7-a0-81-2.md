---
title: " DTOJ1431免费回文号码\t\t"
tags:
  - 数位dp
url: 4449.html
id: 4449
categories:
  - DTOJ
  - Solution
date: 2018-10-23 21:36:01
---

考虑一个非回文数字字符串$s$，往$s$的末尾加一个数，考虑什么情况下$s$仍然是非回文数字字符串。 加入的数不能和$s$最后一位相同，也不能和倒二位相同。除此之外都是可行的。 知道了这个后我们就可以进行数位dp了。 我们可以用$\[0,b\]$的答案减去$\[0,a\]$的答案，那么我们只用求出形如$\[0,x\]$的答案即可。 记$f\[i\]\[j\]\[k\]\[0/1\]$为当前是从高到低第$i$位，倒二位填的数是$j$，最后一位填的数是$k$，这前$i$位是否和$x$的前$i$位相同。 枚举当前位要填什么数即可转移。初始化即初始化前两位的状态。 这样可能处理不了前导零的情况。 我们强制dp中第$1$位一定$>0$，对于有前导零的情况我们手动计算。 枚举有几个前导零，然后我们能计算出每一位填数的方案数，乘积就是数字的个数了。