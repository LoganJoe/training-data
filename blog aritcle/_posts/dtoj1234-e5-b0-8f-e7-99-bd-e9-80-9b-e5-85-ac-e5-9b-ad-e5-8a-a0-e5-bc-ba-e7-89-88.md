---
title: " DTOJ1234小白逛公园加强版\t\t"
tags:
  - 树链剖分
  - 线段树
url: 3446.html
id: 3446
categories:
  - DTOJ
  - Solution
date: 2018-08-14 22:10:49
---

如果是在序列上的，就是一道线段树模板题了。 对于线段树上的每个结点，我们维护这段区间的和、最大连续和以及左/右端点开始的最大连续和。 pushup很容易写错，反正我每次写每次错。 但这题是询问树上的路径。 那么我们就用树链剖分将路径变成序列上的区间即可。 但这题的节点信息和合并的前后顺序有关，因此我们要将两点路径信息拆成两条到$LCA$的路径分别维护。 注意修改为$0$的情况！修改标记万年初始化成$0$果然又又又出事了。测试时一共调了2h…