---
title: " DTOJ3927石头剪刀布\t\t"
tags:
  - dp
url: 4080.html
id: 4080
categories:
  - DTOJ
  - Solution
date: 2018-10-03 23:07:25
---

显然胜利序列就是一个012012不断循环的序列，可以从任意一个数开始。 我们先考虑一个暴力的dp。 记$f\[i\]\[a\]\[b\]\[c\]$表示当前匹配到$A$的第$i$位，以$0$开头的胜利序列最长为$a$，以$1$开头的最长为$b$，以$2$开头的最长为$c$的方案数。 那么我们只要算出多匹配一个数字会转移到哪即可转移。 注意到胜利序列是012012不断循环的，这说明在之前这个dp中，$a,b,c$不会相差太大，最多也只会差$2$，这就说明之前很多状态都是空的，是无用的。 那么随便压一压状态即可。 我是存下$a,b,c$模$3$的余数，且多记一维表示当前最长的胜利序列的长度。