---
title: " DTOJ3848Bajtman i Okrągły Robin\t\t"
tags:
  - 线段树
  - 费用流
url: 3735.html
id: 3735
categories:
  - DTOJ
  - Solution
date: 2018-08-28 21:22:15
---

很容易想到一种费用流的建图。 对于每个长度为$1$的时间段建一个点，然后$S$向这些点连一条容量为$1$，费用为$0$的边。 对于每个强盗也建一个点，$a\_i,b\_i$之间的每个时间段向这个点连一条容量为$1$，费用为$0$的边，然后这个点再向$T$连一条容量为$1$，费用为$c_i$的边。 最大费用最大流就是答案，对没错最大费用。 但这样建边是$\\Theta(5000n)$级别的，跑费用流肯定凉了。 注意到每次连边都是向一段区间里的点连边，那么可以用线段树优化建图。 即建一个长度为$5000$的时间段的点，建两个长度为$2500$的时间段的点……形成线段树的结构，然后每个点向父亲连一条容量为这个点代表的时间段的长度，费用为$0$的边。 连边就变成向$\\log$个点连边了。 这样跑费用流就可以过了，但可能会被卡常…