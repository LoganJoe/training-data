---
title: " DTOJ3702月读\t\t"
tags:
  - hash
  - 奇技淫巧
url: 1979.html
id: 1979
categories:
  - DTOJ
  - Solution
  - 不会证
date: 2018-05-15 11:35:01
---

能形成回文的路径一定是出现次数为奇数的字符种类数是$0$或$1$。把出现次数的奇偶性看成$01$串，因此只有全$0$串或者只有一个$1$的串合法。 假如我们能存下每个点到根的路径上的$01$串，那么每次拿两个端点到根的$01$串异或一下就能得到这条路径的$01$串。 我们可以把$01$串hash起来，即给每种字符一个hash值，然后将hash值异或起来。因为异或两次就等于没有异或，和出现两次奇偶性不变一样。但我觉得维护每种字符出现的次数然后根据奇偶判断当前是要加还是减也行。 那么我们将每种合法的串也hash起来，每次就只用判断当前的$01$串和某个合法串是否相同即可。 据说每次出错的概率好像是$\\frac{1}{2^{64}}$，不会证。 注意此题的数据范围较大，不能用map来判断一个串是否合法，写一个hash表即可。