---
title: " DTOJ3199水箱\t\t"
tags:
  - 并查集
  - 思路
url: 5592.html
id: 5592
categories:
  - Solution
date: 2018-12-16 21:43:24
---

注意到，当一个位置有水时，到其两边第一块比其高的挡板之间的位置水都必须高过这个高度。 那么现在要考虑多少个限制无法被满足。 考虑将隔板与限制一起按照高度排序。那么处理到当前一定是不比这块高度高的挡板。 每次一块挡板会连接两块区域。而加上一个限制，相当于是对于联通的这块区域连一条边，而当前这个点的点权是$0/1$。 这样就可以连出一个限制树了。对于每个点其子树中的点就是其会限制到的点。 而假设当前这个点类型是有水且被选，下面就不可以选没水的点。 有了这些以后就是一个树上最优化问题了。可以树形dp解决。