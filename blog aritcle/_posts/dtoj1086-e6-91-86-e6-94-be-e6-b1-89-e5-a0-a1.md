---
title: " DTOJ1086摆放汉堡\t\t"
tags:
  - dp
  - 思路
  - 高精
url: 3205.html
id: 3205
categories:
  - DTOJ
  - Solution
date: 2018-07-31 14:07:08
---

直接考虑dp。 记$f\[i\]\[j\]$为长度为$i$的排列，最后一位为$j$，且满足前$i$个限制的方案数。 那么如果$a\_i=1$，那么有 $$f\[i\]\[j\]=\\sum\_{k=1}^{j-1}f\[i-1\]\[k\]$$ 如果$a\_i=0$，那么有 $$f\[i\]\[j\]=\\sum\_{k=j}^{i-1}f\[i-1\]\[k\]$$ 解释一下，对于长度为$i-1$且最后一位为$k$的一个排列，我们把$\\geqslant j$的数全部$+1$，然后把$j$放在最后，一定还是一个合法的方案。 这样是$\\Theta(n^3)$的。 很科学对吧？ 但是仔细看看题目，发现这题 没 有 取 模 。 这意味着我们要写 高 精 。 那这个复杂度我们就不能接受了。压位高精也许可以吧。 我们修改一下dp状态，记$f\[i\]\[j\]$为长度为$i$的排列，最后一位$\\leqslant j$，且满足前$i$个限制的方案数。 那么如果$a\_i=1$，那么有 $$f\[i\]\[j\]=f\[i\]\[j-1\]+f\[i-1\]\[j-1\]$$ 如果$a\_i=0$，那么有 $$f\[i\]\[j\]=f\[i\]\[j-1\]+f\[i-1\]\[i-1\]-f\[i-1\]\[j-1\]$$ 这样就是$\\Theta(n^2)$的。再乘上高精最多$900$位，是能过的。 空间要开滚动数组。