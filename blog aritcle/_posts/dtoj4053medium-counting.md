---
title: " DTOJ4053Medium Counting\t\t"
tags:
  - 区间dp
  - 思路
url: 5360.html
id: 5360
categories:
  - DTOJ
  - Solution
date: 2018-12-07 21:47:08
---

我们在每个串的末尾补$0$使它们等长，这里$0$代表一种最小的字符，并且不能用$?$表示。显然这样是不影响方案数的。 考虑dp。 记$f\[l\]\[r\]\[i\]\[j\]$为仅考虑区间$\[l,r\]$中的字符串，从第$i$位开始的后缀，第$i$位至少为$j$的方案数。 有两种转移。 一种是考虑填更大的字符，方案数为$f\[l\]\[r\]\[i\]\[j+1\]$。 另一种是我们枚举$mid\\in\[l,r\]$，然后区间$\[l,mid\]$的字符串第$i$位都填上$j$，方案数为$f\[l\]\[mid\]\[i+1\]\[0\]\\times f\[mid+1\]\[r\]\[I\]\[j+1\]$。 答案是$f\[1\]\[n\]\[1\]\[0\]$。我们可以通过记忆化搜索求出$f$。 时间复杂度$\\Theta(26Ln^2)$。 边界有点多，会有点麻烦，要注意一下。