---
title: " DTOJ1425数列\t\t"
tags:
  - 数学
url: 1690.html
id: 1690
categories:
  - DTOJ
  - Solution
date: 2018-04-24 15:19:23
---

由于序列是递增的，我们考虑枚举每个数和前一个数的差，记第$i$个数和前一个数的差为$a\_i$。 $a\_i$的取值是$\[1,M\]$。若不考虑$N$的限制，那么答案显然是$M^K$。 现在考虑$N$的影响。注意到题目给了一个条件：$M(K-1)<N$ 说明前$K-1$个数的取值可以任取，方案数为$M^{K-1}$，最后一个数的方案是$N-\\sum_{i=1}^{K-1}a\_i$。 那么答案就是前$K-1$个数任取的所有$N-\\sum\_{i=1}^{K-1}a\_i$的和。即 $$M^{K-1}N-\\sum\_{所有情况}\\sum_{i=1}^{K-1}a_i$$ 考虑单独计算每个数对后面那个式子的贡献，即计算每个数在所有情况中在前$K-1$个数中出现了多少次。出现的位置有$K-1$种，除了出现的位置还剩下$K-2$个位置，剩下的位置上的数可以任填。那么出现的次数就是$(K-1)M^{K-2}$。 每个数出现的次数是一样的。那么答案就是 $$M^{K-1}N-\\frac{M(M+1)}{2}\\times (K-1)M^{K-2}$$