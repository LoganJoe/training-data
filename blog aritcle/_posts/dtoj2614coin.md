---
title: " DTOJ2614coin\t\t"
tags:
  - dp
url: 811.html
id: 811
categories:
  - DTOJ
  - Solution
date: 2018-02-26 21:36:29
---

用$f\[i\]\[j\]$表示用$i$种颜色的硬币组成的最小金额$x$，满足$x\\%Min=j$，其中$Min$为最小的硬币面值。 把颜色相同的硬币一起考虑，对于每种颜色，我们用spfa去更新$f$值。 显然有$f\[i\]\[(j+V\_k)\\%Min\]=min(f\[i\]\[(j+V\_k)\\%Min\],f\[i\]\[j\]+V\_k)$($k$为颜色和当前颜色相同的一枚硬币)。 同时有$f\[i+1\]\[(j+V\_k)\\%Min\]=min(f\[i\]\[(j+V\_k)\\%Min\],f\[i\]\[j\]+V\_k)$。 但是这样转移的话，第二种转移会使得一种颜色被多次计算。 为了防止这种情况，对于每种颜色的转移过程，我们新开一个意义和$f$一样的数组$g$维护第二种转移。用当前颜色的硬币更新完再让$f\[i\]\[j\]=min(f\[i\]\[j\],g\[i\]\[j\])$。 对于询问$s$，找到最大的使得$f\[x\]\[s\\%Min\]\\leqslant s$的$x$即为答案，若不存在即答案为$-1$。