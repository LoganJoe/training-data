---
title: " DTOJ3657排列\t\t"
tags:
  - 思路
  - 最小割
url: 5922.html
id: 5922
categories:
  - Solution
date: 2019-01-01 14:39:02
---

考虑让点权为负的点选择的尽量少。 考虑这是一个拓扑图，那么对于一个点，其肯定存在前向点和后向点。所谓前向点和后向点，就是拓扑图上要求在点$x$之前或者之后出现的点。 由于是选择拓扑序的一个子段，我们可以考虑让权值为负的点尽量靠前或者靠后。 那么我们按照正权前向点 $\\to$ 负权点 $ \\to$正权负向点 三部分考虑。那么对于这样的一组关系，有三种解决办法：

*   不选所有前向点，相当于将负权点放在选择子段之前，所有的正权前向点都不能选。同时负权点也不会产生负的代价。
*   选掉这个负权点，产生负权点权值的代价。
*   不选所有后向点，相当于将正权点放在选择子段之后，所有的正权后向点都不能选，同时负权点也不会产生负的代价。

按照这样的思路选择，一定是满足拓扑序的。考虑单个点这样连边，可以建出一个最小割模型。那么多个负权点同样也是一个类似的最小割模型，这样就可以处理掉点限制重叠的情况。按照这个意思建边就好了。具体的：

*   对于正权点，连$S \\to i, i+n \\to T$,容量为$A\[i\]$的边。割掉这条边代表不选这个点。
*   对于负权点，连$i \\to i+n$,容量为$A\[i\]$的边，割掉这条边代表不选负权点。
*   对于边，在$u \\to v,u+n \\to v+n$间连$inf$的边。