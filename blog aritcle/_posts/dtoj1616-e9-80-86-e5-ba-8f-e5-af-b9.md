---
title: " DTOJ1616逆序对\t\t"
tags:
  - CDQ分治
url: 218.html
id: 218
categories:
  - DTOJ
  - Solution
date: 2018-01-10 20:27:09
---

发现题目中的操作只有删除，删除和插入互为相反操作，因此我们可以把时间轴逆转，将问题变为每次插入一个数，询问逆序对个数。 我们把插入的时间看作$x$，位置看作$y$，值看作$z$，就有了$n$个三维空间的点，且每维的坐标都没有重复。某个点$(x,y,z)$被插入时，和它能组成逆序对的点$(a,b,c)$，需要满足$a<x$，$b<y$，$c>z$或者$a<x$，$b>y$，$c<z$。这是个三维偏序问题，可以用CDQ解决。 初始时按一维有序，对另一维分治，最后一维用树状数组维护即可。