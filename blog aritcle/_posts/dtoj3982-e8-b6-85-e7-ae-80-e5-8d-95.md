---
title: " DTOJ3982超简单\t\t"
tags:
  - dp
url: 4375.html
id: 4375
categories:
  - Solution
date: 2018-10-23 13:33:22
---

我的方法又和题解有些出入（起码更麻烦）。

题意是你有一个骰子，它有$n$个面，每一面出现的概率为$p\_i$，每一面上的数为$s\_i$。题目让你一直抛它，直到它有一个面出现2次朝上。求抛出的数的和的期望值。

考虑枚举哪一个数出现了两次，这两个数一定是一个放在末尾，一个放在中间。除去末尾后，就变成一个没有重复数字的，含枚举那个数的序列。而这个序列又是一个给定的数和一段不重复的，不含给定的数的数列。在原数列上将给定的数设成$x$，那么就是求$1\\sim x-1$中选$a$个，$x+1\\sim n$中选$b$个，然后和起来。然后只要把前缀期望，后缀期望dp出来，就好了。

考虑dp，我们设$F\[i\]\[j\]$表示前$i$个数选出$j$个的概率，$G\[i\]\[j\]$表示期望。那么$F\[i\]\[j\]=F\[i-1\]\[j\]+F\[i-1\]\[j-1\]\*p\_i$，$G\[i\]\[j\]=G\[i-1\]\[j\]+G\[i-1\]\[j-1\]\*p\_i+F\[i-1\]\[j-1\]\*p\_i\*s\_i$。后缀和答案计算类似。