---
title: " DTOJ1984花园\t\t"
tags:
  - 树链剖分
  - 线段树
url: 1585.html
id: 1585
categories:
  - DTOJ
  - Solution
date: 2018-04-20 07:44:19
---

和DTOJ1331数树数一样。 关于树上路径的询问，很容易想到树链剖分。 剖分完后，问题变成了询问一段区间颜色为$t$的有多少个，要支持单点修改。 区间问题也很容易想到线段树，那么就可以想到对每种颜色开一棵线段树。 每种颜色的线段树上的每个节点维护这个节点代表的区间内有几个这种颜色，动态开点。 此题强制在线，因此对颜色的离散化也要在线做，用map即可。