---
title: " JZOJ6009counting\t\t"
tags:
  - dp
  - 思路
url: 6100.html
id: 6100
categories:
  - Solution
date: 2019-01-19 14:23:15
---

考虑舍弃题目中的边序列，直接考虑构造强联通分量的那个序列。 要连出强联通分量，其可以直接对于前$i$个点连出一个环，后面点就单独形成一个强联通分量。这样消耗$i$条边就可以连出$n-i$个强联通分量。 考虑加边同时不影响答案。那么肯定是对于剩下的孤点统一向右连，形成DAG。那么这个东西的大小同样是有限制的。 现在有一个清晰的思路，就是dp。$f\[i\]\[j\]\[k\]$表示当前加了$i$条边，$j$个点，目前形成$k$个强联通分量的答案。这可以得到一个$n^5$的做法。 但是考虑到，这样要满足$j\\times(n - 1) + \\frac{(n - j)\\times(n - j - 1)}{ 2} \\geq i$,并且$j+k<i$才有合法情况。于是这就可以前缀和优化转移了。$O(n^4)$就可以算出答案。