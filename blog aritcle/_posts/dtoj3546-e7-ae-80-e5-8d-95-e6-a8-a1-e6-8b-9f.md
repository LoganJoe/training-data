---
title: " DTOJ3546简单模拟\t\t"
tags:
  - 倍增
  - 思路
url: 1008.html
id: 1008
categories:
  - DTOJ
  - Solution
date: 2018-03-10 20:11:48
---

模拟的次数特别多，肯定要找规律。先模拟$q$次看看。 发现除了$b\[0\]$，$A$中每一个值为$b\[i\]$的数都和值为$b\[i-1\]$的数交换了位置（$i\\geqslant 1$），$b\[0\]$是和$A\[1\]$交换位置。 再接下来的$q$次，$b\[0\]$和$b\[q-1\]$交换位置，$b\[i\]$和$b\[i-1\]$交换位置（$i\\geqslant 1$）。 先模拟第$1$次，那么接下来每$q$次为一轮，每一轮都是把$b$中的每个数和前一个数换位置。 由于换位置和值有关，记$to\[i\]\[j\]$为值为$i$的数在第$2^j$轮后变成了什么数。 显然$to\[i\]\[0\]$可以通过模拟$q$次模拟出来。那么剩下的我们就可以倍增求出。 那么我们对于$m$进行二进制拆分，就能在$O(nlog\\space m)$内利用$to$数组求出$m$次操作后的序列了。