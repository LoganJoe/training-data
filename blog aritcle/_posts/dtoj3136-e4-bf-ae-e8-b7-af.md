---
title: " DTOJ3136修路\t\t"
tags:
  - 斯坦纳树
  - 状压dp
url: 1609.html
id: 1609
categories:
  - DTOJ
  - Solution
date: 2018-04-23 09:44:39
---

注意到$1\\leqslant d\\leqslant 4$，$d$小的很不科学。 我们把$i$号点和$n-i+1$号点称作第$i$对点，那么我们就是要使$d$对点中的每对都连通。 显然我们只关心$2d$个点的连通性，那么我们可以把连通状态压起来。 记$f\[i\]\[S\]$为$2d$个点中和$i$的连通状态为$S$的最小花费。 那么显然有 $$f\[i\]\[S\]=\\min\\{f\[i\]\[S\_1\]+f\[i\]\[S\_2\]\\}$$ 其中$S\_1+S\_2=S$，即枚举$S$的子集转移。 还有 $$f\[to\]\[S\]=f\[i\]\[S\]+val$$ 其中$to$是和$i$相连的边的另一个端点，$val$是边权。不用担心这种转移会走到$2d$个点之中却没有更新连通状态。因此边是无向的，所有方案的连通状态都会在前面的转移更新。 这样只能处理$d$对点全部连通的情况，但是它们可以不连通。因此我们再写一个状压dp，把每对点的连通状态合并就能求出答案了。 测试时写时间太短没考虑好第一种情况就GG了。 原来这玩意就是斯坦纳树了…