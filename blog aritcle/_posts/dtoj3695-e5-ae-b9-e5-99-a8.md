---
title: " DTOJ3695容器\t\t"
tags:
  - dp
  - 奇技淫巧
url: 1816.html
id: 1816
categories:
  - DTOJ
  - Solution
date: 2018-04-30 11:41:14
---

此题想法和[DTOJ3514小C的线段树](http://www.dtenomde.com/2018/01/author=jiangyutong/article=400/)类似。 将每个区间$\[l,r\]$看作在位置$l$上$+1$，在位置$r+1$上$-1$，那么限制就相当于对于每个位置，前缀和都要$\\leqslant T$。我们可以根据这个来设计dp转移方程。 记$f\[i\]\[j\]\[k\]$为现在在位置$i$，前面有$j$个$+1$，有$k$个$-1$的方案数。枚举接下来的位置要放几个$+1$几个$-1$就可以转移。 转移时要注意一些细节，比如说$-1$一定要在$+1$后面一个位置放（不然区间为空），任何时刻$-1$的数量不能超过$+1$的数量。以及这题是有标号的，每次转移的时候要乘一个组合数，即从还没放的$+1/-1$选一些出来放的方案数。 其实也就是括号序列。 时间复杂度$\\Theta(n^5)$。 听dalao说放$+1$和放$-1$是独立的，可以分开考虑，效率就能降成$\\Theta(n^4)$了。