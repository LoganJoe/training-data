---
title: " DTOJ3501取石子\t\t"
tags:
  - 博弈
url: 276.html
id: 276
categories:
  - DTOJ
  - Solution
date: 2018-01-18 18:59:05
---

设$a<b$。 首先每堆石子对$a+b$取模是没有影响的。因为如果取模后必胜的人是$A$，在某堆石子添加$a+b$个石子后的局面，$A$仍然是必胜的。因为$A$只要在$B$取走$a+b$中的$b$后取走$a$，就还是必胜的。 我们把石头分为$4$类。

1.  $x<a$，没有用。因为谁都不能取。
2.  $a\\leqslant x<b$，只要存在$A$就是必胜的。因为$B$能取的石子堆$A$都能取，但这类石子堆$B$取不了但$A$能取。
3.  $b\\leqslant x<2a$，只和奇偶有关。因为$A$和$B$都只能取一次，轮流取多次对局面胜负没有影响。
4.  $x\\geqslant 2a$，存在至少$2$个$A$必胜，因为$A$一堆可以取两次，$B$只能取一次；存在$1$个且第$3$类有奇数个$A$必胜，因为如果$B$取了第$4$类，$A$取第$3$类就可以赢；不存在且第$3$类有奇数个先手必胜，因为谁先取第$3$类另一人就不能取了；不存在且第$3$类为偶数个则后手必胜，因为轮流取第$3$类，后手会把最后一堆取走。

若$b\\geqslant 2a$的话，第$3$类不存在，并且若石子数同时满足$2$和$4$的条件，则这堆石子归为第$2$类。 根据$4$类石子的个数用组合数算一下每种情况的方案数。 注意如果第$3$类为$0$个也属于偶数个的情况。