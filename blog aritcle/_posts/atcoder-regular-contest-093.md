---
title: " AtCoder Regular Contest 093\t\t"
tags:
  - 容斥
  - 最小生成树
  - 状压dp
url: 1439.html
id: 1439
categories:
  - AtCoder
  - Solution
date: 2018-04-13 23:44:18
---

C:Traveling Plan
----------------

### 题意

有$n$个地点，分别在$A\_1,A\_2,…,A_n$。从位置$x$走到位置$y$的代价是$|x-y|$。 对于$\\forall i\\in\[1,n\]$，求出依次经过除了第$i$个之外的地点需要的最小代价（起点和终点都在位置$0$）。

### 题解

先算出依次经过每个地点的代价。然后对于每个$i$，减去$A_{i-1}$到$A\_i$和$A\_i$到$A_{i+1}$的代价，再加上$A_{i-1}$到$A_{i+1}$的代价即可。

D:Grid Components
-----------------

### 题意

打印一个长宽都在$100$内的网格，使得每个格子的颜色是黑或白，且白色的连通块个数为$A$，黑色的连通块个数为$B$。

### 题解

$A,B$相对于格子总数较少，所以有很多多余的格子可以使用。 我是按行数奇偶性染成黑白色，然后第一列和第$100$列一个黑一个白，然后再不断从两行黑中隔出很多个大小为$1$的白色连通块，黑色连通块也同理。

E:Bichrome Spanning Tree
------------------------

### 题意

给一个无向图，给每条边染成黑白两色之一。使得这个图最小的满足有两种颜色的最小生成树为$X$。 求染色的方案数$%(1e9+7)$。

### 题解

记$T$为这张图的最小生成树之一，$S$为它的权值和。 定义$diff(e)$为如果将$e$这条边加入生成树，生成树的权值和的增加量。显然对于不在$T$上的边，有$diff(e)\\geqslant 0$。 记$D=X-S$，$diff(e)=D,diff(e)>D$的边数$e$为$cnt1,cnt2$。然后分三种情况讨论。

1.  $D<0$。显然答案为$0$。
2.  $D=0$。如果$T$中的边有两种颜色，那么方案数是$(2^{n-1}-2)\\times 2^{m-n+1}$，前者是染$T$中的边的方案数，后者是其他边随便染的方案数。如果$T$中的边只有一种颜色，那么方案数是$2\\times(2^{cnt1}-1)\\times 2^{cnt2}$，最前面的$2$是$T$中全为黑或白，中间是$cnt1$条边中的一条加入生成树的方案，后面的是其他边随便染的方案数。
3.  $D>0$。方案数是$2\\times(2^{cnt1}-1)\\times 2^{cnt2}$。同第$2$类的后面那种情况。

F:Dark Horse
------------

### 题意

有$2^n$个人要比赛。比赛规则如下： 首先选择一个长度为$2^n$的排列$p$，选手按$p$的顺序站成一排。 然后第一个人和第二个人比赛，第三个人和第四个人比赛，依次类推。输的人离场，赢的人相对位置不变继续比赛，至只剩一个人。 给了一个长度为$m$序列$A$，定义两个人比赛的输赢为：

*   当$y=A_i(i\\in\[1,m\])$时，选手$1$和选手$y$比赛，选手$y$赢。
*   当$y\\neq A_i(i\\in\[1,m\])$时，选手$1$和选手$y$比赛，选手$1$赢。
*   当$1<x<y\\leqslant 2n$时，选手$x$和选手$y$比赛，选手$x$赢。

求能使选手$1$获得最终胜利的排列个数，对$1e9+7$取模。

### 题解

$p\_1=1$的排列对答案的贡献肯定是答案的$\\frac{1}{2n}$。因此只要求出$p\_1=1$且满足条件的排列个数即可。 和选手$1$比赛的选手一定要输给选手$1$。也就是说，选手$1$要赢选手$p\_2$，选手$min\\{p\_3,p\_4\\}$，…，选手$min\\{p\_{2^{n-1}+1},…,p_{2^n}\\}$，因此这些数中不能有$\\forall i\\in\[1,m\],A\_i$，有的话就输了。 考虑容斥。 记$f\[S\]$选手$1$输掉的场次状态为$S$的方案数。 将序列$A$从大到小排序。依次枚举每个$A\_i$，对于一个状态$S$，我们可以算出还未被安排的人数和未被安排且和标号比$A\_i$大的选手个数，且我们知道还未被考虑的场次。选出一些未被安排的人且编号比$A\_i$大的人，和$A_i$一次塞进某一个场次中，就能进行转移了。具体地，如果能选的人有$cnt$个，某个场次需要$k$个人，那么有 $$f\[S'\]+=f\[S\]\\binom{cnt}{k-1}$$ 最后容斥算出答案即可。