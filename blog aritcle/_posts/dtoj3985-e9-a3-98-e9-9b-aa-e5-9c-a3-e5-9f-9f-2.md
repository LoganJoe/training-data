---
title: " DTOJ3985飘雪圣域\t\t"
tags:
  - 思路
  - 线段树
url: 4985.html
id: 4985
categories:
  - Solution
date: 2018-11-01 21:31:50
---

注意到，我们只需要维护与两边都有点存在的边的数目就好了。最后联通块个数就是现有点的个数减去边的个数。那么将树吊任意一点做根，那么当$i,fa\[i\]$同时存在时，$(i,fa\[i\])$这条边就可以计入答案了。这就相当于把边全部压到点上面。 于是这就是一个二维数点问题。我们一维排序一维树状数组解决。 将询问拆成前缀和形式。顺次枚举每个点，同时将其$fa\[i\]$加到树状数组的相应位置。那么对于一条$(i,fa\[i\])$的边存在，我们只需要统计当前时刻树状数组内的区间和即可，也就是编号在$\[l,r\]$间的点的数量。 其实想到二维数点就没有问题了，但是我想到二维数点的时候脑子里以为这题考虑的是树。。。