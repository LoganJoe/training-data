---
title: " DTOJ2606染色大战\t\t"
tags:
  - 状压dp
url: 5076.html
id: 5076
categories:
  - Solution
date: 2018-11-06 22:41:16
---

注意到，数据范围非常的小。既然保证了$n \\times m \\le 20$，那么我们可以考虑状压当前位的状态。 记忆化搜索，$f(S)$为当前棋盘染色状态为$S$，当前手的得分减去下一手的得分的最大值。 那么转移我们可以直接枚举当前未被染色的位置，判定是否形成一个正方形，如果形成一个正方形，下一步还是当前手，于是记当前产生了$sum$个正方形，有$f(S|id_{i,j}) +sum\\to f(S)$。 如果未形成正方形，那么我们就是要让$f(S|id_{i,j})$尽量小，然后就有$-f(S|id_{i,j}) \\to f(S)$。因为既然当前手没有得分，那么得分差就是下一手的取反。这样就可以记忆化搜索转移了。效率是$O(nm2^{nm})$的。