---
title: " DTOJ4103二〇四八\t\t"
tags:
  - dp
  - 奇技淫巧
url: 6237.html
id: 6237
categories:
  - Solution
date: 2019-01-27 08:53:34
---

首先考虑dp。 $f\[i\]\[j\]$为从$i$开始，中间可以合成一个新的$j$的最近位置。显然有 $$f\[i\]\[j\]=\\min{f\[f\[i\]\[j-1\]+1\]\[j-1\],nxt\[i\]\[j\])$$ 其中$nxt\[i\]\[j\]$为$i$往右第一个$j$的位置。 显然，这个店铺决定，$f\[i\]\[j\]$是关于$i$单调不减的。我们将相同的$f\[i\]\[j\]$值压成一段考虑。 注意到题目中，所做的操作是区间覆盖操作。而根据经验，我们可以知道，区间覆盖后，其段数不会太多。那么既然这样，那么$f\[i\]\[j\]$的状态也不会太多。均摊分析可知，其大概是$O(\\log n)$级别的。那么我们用set维护相同的$f\[i\]\[j\]$即可做到正确的复杂度。