---
title: " DTOJ4066狗\t\t"
tags:
  - 思路
  - 线段树
url: 5596.html
id: 5596
categories:
  - Solution
date: 2018-12-17 07:22:40
---

首先可以维护出的是，每条狗是插队到哪条同类型狗之后的。我们将同类型的狗分成多个组，每个组里的狗都是插队到这个组内前一个狗形成的。而无法插队的狗就是新开一个组。这个东西可以用线段树+set维护限制。 然后再考虑怎么维护组内的相对位置。由于每个组肯定是连续的，每个组按照组的加入顺序顺次连接。我们用vector将上面分组后剩下的限制存下来，然后在组内再次线段树上二分确定位置。按照时间顺序往里面填就好了。